import{L as O}from"./vendor-leaflet-B5ybuIjN.js";import{S as w}from"./vendor-maplibre-BrX5Op9A.js";import{v as jn,a as On,O as Fn}from"./vendor-D6IVKLb5.js";function qn(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class Bn{constructor(){this._apiKey="",this._fetch=qn(),this.tileCacheSize=200}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set fetch(e){this._fetch=e}get fetch(){return this._fetch}}const Ne=new Bn,Hn={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},Vn={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},Qe={...Hn,...Vn};function Gn(r,e=Qe){return r in e?r[r]:null}function Jt(r,e=Qe){for(const t of Object.values(e))if(t.code===r)return t;return null}function Yt(r,e=Qe){for(const t of Object.values(e))if(t.flag===r)return t;return null}function Kn(r){return r!==null&&typeof r=="object"&&"code"in r&&"flag"in r&&"name"in r&&"latin"in r&&"isMode"in r&&"geocoding"in r&&(typeof r.code=="string"||r.code===null)&&typeof r.flag=="string"&&typeof r.name=="string"&&typeof r.latin=="boolean"&&typeof r.isMode=="boolean"&&typeof r.geocoding=="boolean"}function Fr(r,e=Qe){return Kn(r)?Yt(r.flag,e):typeof r!="string"?null:Gn(r,e)||Jt(r,e)||Yt(r,e)||null}async function Wn(r,e={}){if(Ne.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(r).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return Ne.fetch(r,e)}const La={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(La);class Zn extends Error{constructor(e,t=""){super(`Call to enpoint ${e.url} failed with the status code ${e.status}. ${t}`),this.res=e}}const qr={403:"Key is missing, invalid or restricted"};async function Jn(r={}){const e=new URL("geolocation/ip.json",La.maptilerApiURL);e.searchParams.set("key",r.apiKey??Ne.apiKey);const t=e.toString(),a=await Wn(t);if(!a.ok)throw new Zn(a,a.status in qr?qr[a.status]:"");return await a.json()}const Br={info:Jn};function _a(r){const e=/^maptiler:\/\/(.*)/;let t;const a=r.trim();let n;return a.startsWith("http://")||a.startsWith("https://")?n=a:(t=e.exec(a))!==null?n=`https://api.maptiler.com/maps/${t[1]}/style.json`:n=`https://api.maptiler.com/maps/${a}/style.json`,n}class Ca{constructor(e,t,a,n,o,i,s=!1){this.name=e,this.variantType=t,this.id=a,this.referenceStyle=n,this.description=o,this.imageURL=i,this.deprecated=s}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(e){return this.referenceStyle.hasVariant(e)}getVariant(e){const t=this.referenceStyle.getVariant(e);return this.warnIfDeprecated(t),t}getVariants(){return this.referenceStyle.getVariants().filter(e=>e!==this).map(e=>(this.warnIfDeprecated(e),e))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return _a(this.getId())}warnIfDeprecated(e=this){if(!e.deprecated)return e;const t=e.getFullName();return console.warn(`Style "${t}" is deprecated and will be removed in a future version.`),e}}class Ta{constructor(e,t){this.name=e,this.id=t,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}hasVariant(e){return e in this.variants}getVariant(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const He=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",deprecated:!0,name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]}];function Yn(r){return new Proxy(r,{get(e,t,a){return e.hasVariant(t)?e.getVariant(t):t.toString().toUpperCase()===t?r.getDefaultVariant():Reflect.get(e,t,a)}})}function Xn(){const r={};for(let e=0;e<He.length;e+=1){const t=He[e],a=Yn(new Ta(t.name,t.referenceStyleID));for(let n=0;n<t.variants.length;n+=1){const o=t.variants[n],i=new Ca(o.name,o.variantType,o.id,a,o.description,o.imageURL,o.deprecated);a.addVariant(i)}r[t.referenceStyleID]=a}return r}const Ve=Xn();var Qn=Object.defineProperty,Ma=r=>{throw TypeError(r)},eo=(r,e,t)=>e in r?Qn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,A=(r,e,t)=>eo(r,typeof e!="symbol"?e+"":e,t),mr=(r,e,t)=>e.has(r)||Ma("Cannot "+t),M=(r,e,t)=>(mr(r,e,"read from private field"),t?t.call(r):e.get(r)),be=(r,e,t)=>e.has(r)?Ma("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ze=(r,e,t,a)=>(mr(r,e,"write to private field"),e.set(r,t),t),G=(r,e,t)=>(mr(r,e,"access private method"),t);const I={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...Qe};function Hr(){if(typeof navigator>"u"){const r=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Jt(r)||I.ENGLISH}return Array.from(new Set(navigator.languages.map(r=>r.split("-")[0]))).map(r=>Jt(r)).filter(r=>r)[0]??I.LOCAL}const V={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:I.STYLE,secondaryLanguage:I.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(V);const hr=jn();class to extends Fn{constructor(){super(...arguments),A(this,"primaryLanguage",V.primaryLanguage),A(this,"secondaryLanguage"),A(this,"session",!0),A(this,"caching",!0),A(this,"telemetry",!0),A(this,"_unit","metric"),A(this,"_apiKey","")}set unit(e){this._unit=e,this.emit("unit",e)}get unit(){return this._unit}set apiKey(e){this._apiKey=e,Ne.apiKey=e,this.emit("apiKey",e)}get apiKey(){return this._apiKey}set fetch(e){Ne.fetch=e}get fetch(){return Ne.fetch}}const D=new to,Xt="localcache_source",Qt="localcache",ro="maptiler_sdk",ao=1e3,no=100,er=typeof caches<"u",{addProtocol:Vr}=w;function oo(r,e){if(er&&D.caching&&D.session&&r.host===V.maptilerApiHost){if(e==="Source"&&r.href.includes("tiles.json"))return r.href.replace("https://",`${Xt}://`);if(e==="Tile"||e==="Glyphs")return r.href.replace("https://",`${Qt}://`)}return r.href}let Ot;async function Ia(){return Ot||(Ot=await caches.open(ro)),Ot}let Gr=0;async function io(){const r=await Ia(),e=await r.keys(),t=e.slice(0,Math.max(e.length-ao,0));for(const a of t)r.delete(a)}function so(){Vr(Xt,async(r,e)=>{if(!r.url)throw new Error("");r.url=r.url.replace(`${Xt}://`,"https://");const t=r;t.signal=e.signal;const a=await fetch(r.url,t),n=await a.json();return n.tiles&&n.tiles.length>0&&(n.tiles[0]+=`&last-modified=${a.headers.get("Last-Modified")}`),{data:n,cacheControl:a.headers.get("Cache-Control"),expires:a.headers.get("Expires")}}),Vr(Qt,async(r,e)=>{if(!r.url)throw new Error("");r.url=r.url.replace(`${Qt}://`,"https://");const t=new URL(r.url),a=new URL(t);a.searchParams.delete("mtsid"),a.searchParams.delete("key");const n=a.toString(),o=new URL(t);o.searchParams.delete("last-modified");const i=o.toString(),s=async h=>({data:await h.arrayBuffer(),cacheControl:h.headers.get("Cache-Control"),expires:h.headers.get("Expires")}),l=await Ia(),u=await l.match(n);if(u)return s(u);const c=r;c.signal=e.signal;const p=await fetch(i,c);return p.status>=200&&p.status<300&&(l.put(n,p.clone()).catch(()=>{}),++Gr>no&&(io(),Gr=0)),s(p)})}function lo(){if(typeof window>"u")return;const r=w.getRTLTextPluginStatus();if(r==="unavailable"||r==="requested")try{w.setRTLTextPlugin(V.rtlPluginURL,!0)}catch{}}function uo(r,e){for(const t of r)typeof e[t]=="function"&&(e[t]=e[t].bind(e))}function Kr(r,e){let t=null;try{t=new URL(r)}catch{return{url:r}}return t.host===V.maptilerApiHost&&(t.searchParams.has("key")||t.searchParams.append("key",D.apiKey),D.session&&t.searchParams.append("mtsid",hr)),{url:oo(t,e)}}function Wr(r){return(e,t)=>{if(r!=null){const a=r(e,t),n=Kr((a==null?void 0:a.url)??"",t);return{...a,...n}}return Kr(e,t)}}function Ea(){return Math.random().toString(36).substring(2)}function kt(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(r)}function co(r){try{return JSON.parse(r)}catch{}return null}function po(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function fo(r){const e=po();if(!e)return;let t=null;if(typeof r=="string"?t=document.getElementById(r):r instanceof HTMLElement&&(t=r),!t)throw new Error("The Map container must be provided.");const a=document.createElement("div");throw a.innerHTML=e,a.classList.add("webgl-warning-div"),t.appendChild(a),new Error(e)}function Zr(r,e){return!(!Array.isArray(r)||r.length!==2||r[0]!=="get"||typeof r[1]!="string"||e&&!r[1].startsWith("name:")||!e&&r[1]!=="name")}function mo(r,e,t){const a=structuredClone(r),n=o=>{if(typeof o!="string")for(let i=0;i<o.length;i+=1)Zr(o[i],t)?o[i]=structuredClone(e):n(o[i])};return Zr(a,t)?e:(n(a),a)}function ho(r,e){const t=e?/\{name:\S+\}/:/\{name\}/;return{contains:t.test(r),exactMatch:new RegExp(`^${t.source}$`).test(r)}}function yo(r,e,t){const a=t?/\{name:\S+\}/:/\{name\}/,n=r.split(a);return["concat",...n.flatMap((o,i)=>i===n.length-1?[o]:[o,e])]}function go(r){var e;const t=/\{name(?:\:(?<language>\S+))?\}/g,a=[];for(;;){const n=t.exec(r);if(!n)break;const o=((e=n.groups)==null?void 0:e.language)??null;a.push(o)}return a}function vo(r){return!Array.isArray(r)||r.length!==2||r[0]!=="get"||typeof r[1]!="string"?null:r[1].trim()==="name"?{isLanguage:!0,localization:null}:r[1].trim().startsWith("name:")?{isLanguage:!0,localization:r[1].trim().split(":").pop()}:null}function bo(r){const e=[],t=structuredClone(r),a=n=>{if(typeof n!="string")for(let o=0;o<n.length;o+=1){const i=vo(n[o]);i?e.push(i.localization):a(n[o])}};return a([t]),e}function xo(r,e){const t=[];for(const o of r){if(o.type!=="symbol")continue;const i=o,{id:s,layout:l}=i;if(!l||!("text-field"in l))continue;const u=e.getLayoutProperty(s,"text-field");if(u)if(typeof u=="string"){const c=go(u);t.push(c)}else{const c=bo(u);t.push(c)}}const a=t.flat(),n={unlocalized:0,localized:{}};for(const o of a)o===null?n.unlocalized+=1:(o in n.localized||(n.localized[o]=0),n.localized[o]+=1);return n}(class extends w.Marker{addTo(r){return super.addTo(r)}});class ml extends w.Popup{addTo(e){return super.addTo(e)}}class hl extends w.Style{constructor(e,t={}){super(e,t)}}class yl extends w.CanvasSource{onAdd(e){super.onAdd(e)}}class gl extends w.GeoJSONSource{onAdd(e){super.onAdd(e)}}class vl extends w.ImageSource{onAdd(e){super.onAdd(e)}}class bl extends w.RasterTileSource{onAdd(e){super.onAdd(e)}}class xl extends w.RasterDEMTileSource{onAdd(e){super.onAdd(e)}}class wl extends w.VectorTileSource{onAdd(e){super.onAdd(e)}}class Sl extends w.VideoSource{onAdd(e){super.onAdd(e)}}class wo extends w.NavigationControl{onAdd(e){return super.onAdd(e)}}class So extends w.GeolocateControl{onAdd(e){return super.onAdd(e)}}class kl extends w.AttributionControl{onAdd(e){return super.onAdd(e)}}class ko extends w.LogoControl{onAdd(e){return super.onAdd(e)}}class Ao extends w.ScaleControl{onAdd(e){return super.onAdd(e)}}class Lo extends w.FullscreenControl{onAdd(e){return super.onAdd(e)}}class Al extends w.TerrainControl{onAdd(e){return super.onAdd(e)}}class Ll extends w.BoxZoomHandler{constructor(e,t){super(e,t)}}class _l extends w.ScrollZoomHandler{constructor(e,t){super(e,t)}}class Cl extends w.CooperativeGesturesHandler{constructor(e,t){super(e,t)}}class Tl extends w.KeyboardHandler{constructor(e){super(e)}}class Ml extends w.TwoFingersTouchPitchHandler{constructor(e){super(e)}}class Il extends w.MapWheelEvent{constructor(e,t,a){super(e,t,a)}}class El extends w.MapTouchEvent{constructor(e,t,a){super(e,t,a)}}class zl extends w.MapMouseEvent{constructor(e,t,a,n={}){super(e,t,a,n)}}class Jr extends ko{constructor(e={}){super(e),A(this,"logoURL",""),A(this,"linkURL",""),this.logoURL=e.logoURL??V.maptilerLogoURL,this.linkURL=e.linkURL??V.maptilerURL}onAdd(e){this._map=e,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const t=window.document.createElement("a");return t.style.backgroundRepeat="no-repeat",t.style.cursor="pointer",t.style.display="block",t.style.height="23px",t.style.margin="0 0 -4px -4px",t.style.overflow="hidden",t.style.width="88px",t.style.backgroundImage=`url(${this.logoURL})`,t.style.backgroundSize="100px 30px",t.style.width="100px",t.style.height="30px",t.target="_blank",t.rel="noopener",t.href=this.linkURL,t.setAttribute("aria-label","MapTiler logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var _o=8,Co={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},To={"*":{type:"source"}},Mo=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Io={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Eo={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},zo={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ro={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Po={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},No={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},$o={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Uo=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Do={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jo={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oo={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Fo={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qo={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bo={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ho={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vo={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Go={type:"array",value:"*"},Ko={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Wo={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Zo={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Jo={type:"array",value:"*",minimum:1},Yo={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Xo={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Qo={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},ei={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},ti=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],ri={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},ai={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ni={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},oi={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ii={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},si={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},li={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ui={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ci={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},pi={"*":{type:"string"}},di={$version:_o,$root:Co,sources:To,source:Mo,source_vector:Io,source_raster:Eo,source_raster_dem:zo,source_geojson:Ro,source_video:Po,source_image:No,layer:$o,layout:Uo,layout_background:Do,layout_fill:jo,layout_circle:Oo,layout_heatmap:Fo,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:qo,layout_symbol:Bo,layout_raster:Ho,layout_hillshade:Vo,filter:Go,filter_operator:Ko,geometry_type:Wo,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Zo,expression:Jo,light:Yo,sky:Xo,terrain:Qo,projection:ei,paint:ti,paint_fill:ri,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:ai,paint_circle:ni,paint_heatmap:oi,paint_symbol:ii,paint_raster:si,paint_hillshade:li,paint_background:ui,transition:ci,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:pi};let y=class{constructor(e,t,a,n){this.message=(e?`${e}: `:"")+a,n&&(this.identifier=n),t!=null&&t.__line__&&(this.line=t.__line__)}};function ft(r,...e){for(const t of e)for(const a in t)r[a]=t[a];return r}class oe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class yr{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[a,n]of t)this.bindings[a]=n}concat(e){return new yr(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const At={kind:"null"},g={kind:"number"},C={kind:"string"},L={kind:"boolean"},ie={kind:"color"},Lt={kind:"projectionDefinition"},$e={kind:"object"},_={kind:"value"},fi={kind:"error"},_t={kind:"collator"},Ct={kind:"formatted"},Tt={kind:"padding"},et={kind:"resolvedImage"},Mt={kind:"variableAnchorOffsetCollection"};function W(r,e){return{kind:"array",itemType:r,N:e}}function U(r){if(r.kind==="array"){const e=U(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}else return r.kind}const mi=[At,g,C,L,ie,Lt,Ct,$e,W(_),Tt,et,Mt];function Ke(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ke(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const t of mi)if(!Ke(t,e))return null}}return`Expected ${U(r)} but found ${U(e)} instead.`}function gr(r,e){return e.some(t=>t.kind===r.kind)}function Ae(r,e){return e.some(t=>t==="null"?r===null:t==="array"?Array.isArray(r):t==="object"?r&&!Array.isArray(r)&&typeof r=="object":t===typeof r)}function Ee(r,e){return r.kind==="array"&&e.kind==="array"?r.itemType.kind===e.itemType.kind&&typeof r.N=="number":r.kind===e.kind}const za=.96422,Ra=1,Pa=.82521,Na=4/29,Ue=6/29,$a=3*Ue*Ue,hi=Ue*Ue*Ue,yi=Math.PI/180,gi=180/Math.PI;function Ua(r){return r=r%360,r<0&&(r+=360),r}function Da([r,e,t,a]){r=Ft(r),e=Ft(e),t=Ft(t);let n,o;const i=qt((.2225045*r+.7168786*e+.0606169*t)/Ra);r===e&&e===t?n=o=i:(n=qt((.4360747*r+.3850649*e+.1430804*t)/za),o=qt((.0139322*r+.0971045*e+.7141733*t)/Pa));const s=116*i-16;return[s<0?0:s,500*(n-i),200*(i-o),a]}function Ft(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function qt(r){return r>hi?Math.pow(r,1/3):r/$a+Na}function ja([r,e,t,a]){let n=(r+16)/116,o=isNaN(e)?n:n+e/500,i=isNaN(t)?n:n-t/200;return n=Ra*Ht(n),o=za*Ht(o),i=Pa*Ht(i),[Bt(3.1338561*o-1.6168667*n-.4906146*i),Bt(-.9787684*o+1.9161415*n+.033454*i),Bt(.0719453*o-.2289914*n+1.4052427*i),a]}function Bt(r){return r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055,r<0?0:r>1?1:r}function Ht(r){return r>Ue?r*r*r:$a*(r-Na)}function vi(r){const[e,t,a,n]=Da(r),o=Math.sqrt(t*t+a*a);return[Math.round(o*1e4)?Ua(Math.atan2(a,t)*gi):NaN,o,e,n]}function bi([r,e,t,a]){return r=isNaN(r)?0:r*yi,ja([t,Math.cos(r)*e,Math.sin(r)*e,a])}function xi([r,e,t,a]){r=Ua(r),e/=100,t/=100;function n(o){const i=(o+r/30)%12,s=e*Math.min(t,1-t);return t-s*Math.max(-1,Math.min(i-3,9-i,1))}return[n(0),n(8),n(4),a]}function wi(r){if(r=r.toLowerCase().trim(),r==="transparent")return[0,0,0,0];const e=Si[r];if(e){const[n,o,i]=e;return[n/255,o/255,i/255,1]}if(r.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(r)){const n=r.length<6?1:2;let o=1;return[it(r.slice(o,o+=n)),it(r.slice(o,o+=n)),it(r.slice(o,o+=n)),it(r.slice(o,o+n)||"ff")]}if(r.startsWith("rgb")){const n=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=r.match(n);if(o){const[i,s,l,u,c,p,h,d,m,f,v,b]=o,x=[u||" ",h||" ",f].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){const T=[l,p,m].join(""),$=T==="%%%"?100:T===""?255:0;if($){const P=[Re(+s/$,0,1),Re(+c/$,0,1),Re(+d/$,0,1),v?Yr(+v,b):1];if(Xr(P))return P}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,a=r.match(t);if(a){const[n,o,i,s,l,u,c,p,h]=a,d=[i||" ",l||" ",c].join("");if(d==="  "||d==="  /"||d===",,"||d===",,,"){const m=[+o,Re(+s,0,100),Re(+u,0,100),p?Yr(+p,h):1];if(Xr(m))return xi(m)}}}function it(r){return parseInt(r.padEnd(2,r),16)/255}function Yr(r,e){return Re(e?r/100:r,0,1)}function Re(r,e,t){return Math.min(Math.max(e,r),t)}function Xr(r){return!r.some(Number.isNaN)}const Si={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Le(r,e,t){return r+t*(e-r)}function mt(r,e,t){return r.map((a,n)=>Le(a,e[n],t))}class N{constructor(e,t,a,n=1,o=!0){this.r=e,this.g=t,this.b=a,this.a=n,o||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[e,t,a,n]))}static parse(e){if(e instanceof N)return e;if(typeof e!="string")return;const t=wi(e);if(t)return new N(...t,!1)}get rgb(){const{r:e,g:t,b:a,a:n}=this,o=n||1/0;return this.overwriteGetter("rgb",[e/o,t/o,a/o,n])}get hcl(){return this.overwriteGetter("hcl",vi(this.rgb))}get lab(){return this.overwriteGetter("lab",Da(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,a,n]=this.rgb;return`rgba(${[e,t,a].map(o=>Math.round(o*255)).join(",")},${n})`}static interpolate(e,t,a,n="rgb"){switch(n){case"rgb":{const[o,i,s,l]=mt(e.rgb,t.rgb,a);return new N(o,i,s,l,!1)}case"hcl":{const[o,i,s,l]=e.hcl,[u,c,p,h]=t.hcl;let d,m;if(!isNaN(o)&&!isNaN(u)){let T=u-o;u>o&&T>180?T-=360:u<o&&o-u>180&&(T+=360),d=o+a*T}else isNaN(o)?isNaN(u)?d=NaN:(d=u,(s===1||s===0)&&(m=c)):(d=o,(p===1||p===0)&&(m=i));const[f,v,b,x]=bi([d,m??Le(i,c,a),Le(s,p,a),Le(l,h,a)]);return new N(f,v,b,x,!1)}case"lab":{const[o,i,s,l]=ja(mt(e.lab,t.lab,a));return new N(o,i,s,l,!1)}}}}N.black=new N(0,0,0,1);N.white=new N(1,1,1,1);N.transparent=new N(0,0,0,0);N.red=new N(1,0,0,1);class vr{constructor(e,t,a){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ki=["bottom","center","top"];class tr{constructor(e,t,a,n,o,i){this.text=e,this.image=t,this.scale=a,this.fontStack=n,this.textColor=o,this.verticalAlign=i}}class de{constructor(e){this.sections=e}static fromString(e){return new de([new tr(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof de?e:de.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class te{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof te)return e;if(typeof e=="number")return new te([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new te(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,a){return new te(mt(e.values,t.values,a))}}class F{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Ai=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class se{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof se)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const a=e[t],n=e[t+1];if(typeof a!="string"||!Ai.has(a)||!Array.isArray(n)||n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")return}return new se(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,a){const n=e.values,o=t.values;if(n.length!==o.length)throw new F(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const i=[];for(let s=0;s<n.length;s+=2){if(n[s]!==o[s])throw new F(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${n[s]}, to[${s}]: ${o[s]}`);i.push(n[s]);const[l,u]=n[s+1],[c,p]=o[s+1];i.push([Le(l,c,a),Le(u,p,a)])}return new se(i)}}class ge{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ge({name:e,available:!1}):null}}class Q{constructor(e,t,a){this.from=e,this.to=t,this.transition=a}static interpolate(e,t,a){return new Q(e,t,a)}static parse(e){if(e instanceof Q)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Q(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Q(e.from,e.to,e.transition);if(typeof e=="string")return new Q(e,e,1)}}function Oa(r,e,t,a){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof a>"u"||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[r,e,t,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[r,e,t,a]:[r,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function We(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Q||r instanceof N||r instanceof vr||r instanceof de||r instanceof te||r instanceof se||r instanceof ge)return!0;if(Array.isArray(r)){for(const e of r)if(!We(e))return!1;return!0}else if(typeof r=="object"){for(const e in r)if(!We(r[e]))return!1;return!0}else return!1}function q(r){if(r===null)return At;if(typeof r=="string")return C;if(typeof r=="boolean")return L;if(typeof r=="number")return g;if(r instanceof N)return ie;if(r instanceof Q)return Lt;if(r instanceof vr)return _t;if(r instanceof de)return Ct;if(r instanceof te)return Tt;if(r instanceof se)return Mt;if(r instanceof ge)return et;if(Array.isArray(r)){const e=r.length;let t;for(const a of r){const n=q(a);if(!t)t=n;else{if(t===n)continue;t=_;break}}return W(t||_,e)}else return $e}function Ge(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof N||r instanceof Q||r instanceof de||r instanceof te||r instanceof se||r instanceof ge?r.toString():JSON.stringify(r)}class De{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!We(e[1]))return t.error("invalid value");const a=e[1];let n=q(a);const o=t.expectedType;return n.kind==="array"&&n.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(n=o),new De(n,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const st={string:C,number:g,boolean:L,object:$e};class ee{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let a=1,n;const o=e[0];if(o==="array"){let s;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in st)||u==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);s=st[u],a++}else s=_;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);l=e[2],a++}n=W(s,l)}else{if(!st[o])throw new Error(`Types doesn't contain name = ${o}`);n=st[o]}const i=[];for(;a<e.length;a++){const s=t.parse(e[a],a,_);if(!s)return null;i.push(s)}return new ee(n,i)}evaluate(e){for(let t=0;t<this.args.length;t++){const a=this.args[t].evaluate(e);if(Ke(this.type,q(a))){if(t===this.args.length-1)throw new F(`Expected value to be of type ${U(this.type)}, but found ${U(q(a))} instead.`)}else return a}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Qr={"to-boolean":L,"to-color":ie,"to-number":g,"to-string":C};class he{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const a=e[0];if(!Qr[a])throw new Error(`Can't parse ${a} as it is not part of the known types`);if((a==="to-boolean"||a==="to-string")&&e.length!==2)return t.error("Expected one argument.");const n=Qr[a],o=[];for(let i=1;i<e.length;i++){const s=t.parse(e[i],i,_);if(!s)return null;o.push(s)}return new he(n,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,a;for(const n of this.args){if(t=n.evaluate(e),a=null,t instanceof N)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?a=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:a=Oa(t[0],t[1],t[2],t[3]),!a))return new N(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new F(a||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const a of this.args){t=a.evaluate(e);const n=te.parse(t);if(n)return n}throw new F(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const a of this.args){t=a.evaluate(e);const n=se.parse(t);if(n)return n}throw new F(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const a of this.args){if(t=a.evaluate(e),t===null)return 0;const n=Number(t);if(!isNaN(n))return n}throw new F(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return de.fromString(Ge(this.args[0].evaluate(e)));case"resolvedImage":return ge.fromString(Ge(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Ge(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Li=["Unknown","Point","LineString","Polygon"];class Fa{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Li[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=N.parse(e)),t}}class It{constructor(e,t,a=[],n,o=new yr,i=[]){this.registry=e,this.path=a,this.key=a.map(s=>`[${s}]`).join(""),this.scope=o,this.errors=i,this.expectedType=n,this._isConstant=t}parse(e,t,a,n,o={}){return t?this.concat(t,a,n)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function a(n,o,i){return i==="assert"?new ee(o,[n]):i==="coerce"?new he(o,[n]):n}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if(typeof n!="string")return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[n];if(o){let i=o.parse(e,this);if(!i)return null;if(this.expectedType){const s=this.expectedType,l=i.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")i=a(i,s,t.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&(l.kind==="string"||l.kind==="array"))i=a(i,s,t.typeAnnotation||"coerce");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))i=a(i,s,t.typeAnnotation||"coerce");else if(s.kind==="padding"&&(l.kind==="value"||l.kind==="number"||l.kind==="array"))i=a(i,s,t.typeAnnotation||"coerce");else if(s.kind==="variableAnchorOffsetCollection"&&(l.kind==="value"||l.kind==="array"))i=a(i,s,t.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(i instanceof De)&&i.type.kind!=="resolvedImage"&&this._isConstant(i)){const s=new Fa;try{i=new De(i.type,i.evaluate(s))}catch(l){return this.error(l.message),null}}return i}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,a){const n=typeof e=="number"?this.path.concat(e):this.path,o=a?this.scope.concat(a):this.scope;return new It(this.registry,this._isConstant,n,t||null,o,this.errors)}error(e,...t){const a=`${this.key}${t.map(n=>`[${n}]`).join("")}`;this.errors.push(new oe(a,e))}checkSubtype(e,t){const a=Ke(e,t);return a&&this.error(a),a}}class Et{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let o=1;o<e.length-1;o+=2){const i=e[o];if(typeof i!="string")return t.error(`Expected string, but found ${typeof i} instead.`,o);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=t.parse(e[o+1],o+1);if(!s)return null;a.push([i,s])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,a);return n?new Et(a,n):null}outputDefined(){return this.result.outputDefined()}}class zt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const a=e[1];return t.scope.has(a)?new zt(a,t.scope.get(a)):t.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class br{constructor(e,t,a){this.type=e,this.index=t,this.input=a}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=t.parse(e[1],1,g),n=t.parse(e[2],2,W(t.expectedType||_));if(!a||!n)return null;const o=n.type;return new br(o.itemType,a,n)}evaluate(e){const t=this.index.evaluate(e),a=this.input.evaluate(e);if(t<0)throw new F(`Array index out of bounds: ${t} < 0.`);if(t>=a.length)throw new F(`Array index out of bounds: ${t} > ${a.length-1}.`);if(t!==Math.floor(t))throw new F(`Array index must be an integer, but found ${t} instead.`);return a[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class xr{constructor(e,t){this.type=L,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=t.parse(e[1],1,_),n=t.parse(e[2],2,_);return!a||!n?null:gr(a.type,[L,C,g,At,_])?new xr(a,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(a.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!a)return!1;if(!Ae(t,["boolean","string","number","null"]))throw new F(`Expected first argument to be of type boolean, string, number or null, but found ${U(q(t))} instead.`);if(!Ae(a,["string","array"]))throw new F(`Expected second argument to be of type array or string, but found ${U(q(a))} instead.`);return a.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class ht{constructor(e,t,a){this.type=g,this.needle=e,this.haystack=t,this.fromIndex=a}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=t.parse(e[1],1,_),n=t.parse(e[2],2,_);if(!a||!n)return null;if(!gr(a.type,[L,C,g,At,_]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(a.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,g);return o?new ht(a,n,o):null}else return new ht(a,n)}evaluate(e){const t=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!Ae(t,["boolean","string","number","null"]))throw new F(`Expected first argument to be of type boolean, string, number or null, but found ${U(q(t))} instead.`);let n;if(this.fromIndex&&(n=this.fromIndex.evaluate(e)),Ae(a,["string"])){const o=a.indexOf(t,n);return o===-1?-1:[...a.slice(0,o)].length}else{if(Ae(a,["array"]))return a.indexOf(t,n);throw new F(`Expected second argument to be of type array or string, but found ${U(q(a))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class wr{constructor(e,t,a,n,o,i){this.inputType=e,this.type=t,this.input=a,this.cases=n,this.outputs=o,this.otherwise=i}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let a,n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);const o={},i=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const p=e[u+1];Array.isArray(c)||(c=[c]);const h=t.concat(u);if(c.length===0)return h.error("Expected at least one branch label.");for(const m of c){if(typeof m!="number"&&typeof m!="string")return h.error("Branch labels must be numbers or strings.");if(typeof m=="number"&&Math.abs(m)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof m=="number"&&Math.floor(m)!==m)return h.error("Numeric branch labels must be integer values.");if(!a)a=q(m);else if(h.checkSubtype(a,q(m)))return null;if(typeof o[String(m)]<"u")return h.error("Branch labels must be unique.");o[String(m)]=i.length}const d=t.parse(p,u,n);if(!d)return null;n=n||d.type,i.push(d)}const s=t.parse(e[1],1,_);if(!s)return null;const l=t.parse(e[e.length-1],e.length-1,n);return!l||s.type.kind!=="value"&&t.concat(1).checkSubtype(a,s.type)?null:new wr(a,n,s,o,i,l)}evaluate(e){const t=this.input.evaluate(e);return(q(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Sr{constructor(e,t,a){this.type=e,this.branches=t,this.otherwise=a}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let a;t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);const n=[];for(let i=1;i<e.length-1;i+=2){const s=t.parse(e[i],i,L);if(!s)return null;const l=t.parse(e[i+1],i+1,a);if(!l)return null;n.push([s,l]),a=a||l.type}const o=t.parse(e[e.length-1],e.length-1,a);if(!o)return null;if(!a)throw new Error("Can't infer output type");return new Sr(a,n,o)}evaluate(e){for(const[t,a]of this.branches)if(t.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,a]of this.branches)e(t),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class yt{constructor(e,t,a,n){this.type=e,this.input=t,this.beginIndex=a,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=t.parse(e[1],1,_),n=t.parse(e[2],2,g);if(!a||!n)return null;if(!gr(a.type,[W(_),C,_]))return t.error(`Expected first argument to be of type array or string, but found ${U(a.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,g);return o?new yt(a.type,a,n,o):null}else return new yt(a.type,a,n)}evaluate(e){const t=this.input.evaluate(e),a=this.beginIndex.evaluate(e);let n;if(this.endIndex&&(n=this.endIndex.evaluate(e)),Ae(t,["string"]))return[...t].slice(a,n).join("");if(Ae(t,["array"]))return t.slice(a,n);throw new F(`Expected first argument to be of type array or string, but found ${U(q(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function qa(r,e){const t=r.length-1;let a=0,n=t,o=0,i,s;for(;a<=n;)if(o=Math.floor((a+n)/2),i=r[o],s=r[o+1],i<=e){if(o===t||e<s)return o;a=o+1}else if(i>e)n=o-1;else throw new F("Input is not a number.");return 0}class Rt{constructor(e,t,a){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[n,o]of a)this.labels.push(n),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const a=t.parse(e[1],1,g);if(!a)return null;const n=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let i=1;i<e.length;i+=2){const s=i===1?-1/0:e[i],l=e[i+1],u=i,c=i+1;if(typeof s!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const p=t.parse(l,c,o);if(!p)return null;o=o||p.type,n.push([s,p])}return new Rt(o,a,n)}evaluate(e){const t=this.labels,a=this.outputs;if(t.length===1)return a[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return a[0].evaluate(e);const o=t.length;if(n>=t[o-1])return a[o-1].evaluate(e);const i=qa(t,n);return a[i].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function _i(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vt,ea;function Ci(){if(ea)return Vt;ea=1,Vt=r;function r(e,t,a,n){this.cx=3*e,this.bx=3*(a-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=a,this.p2y=n}return r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var a=e,n=0;n<8;n++){var o=this.sampleCurveX(a)-e;if(Math.abs(o)<t)return a;var i=this.sampleCurveDerivativeX(a);if(Math.abs(i)<1e-6)break;a=a-o/i}var s=0,l=1;for(a=e,n=0;n<20&&(o=this.sampleCurveX(a),!(Math.abs(o-e)<t));n++)e>o?s=a:l=a,a=(l-s)*.5+s;return a},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Vt}var Ti=Ci(),Mi=_i(Ti);class le{constructor(e,t,a,n,o){this.type=e,this.operator=t,this.interpolation=a,this.input=n,this.labels=[],this.outputs=[];for(const[i,s]of o)this.labels.push(i),this.outputs.push(s)}static interpolationFactor(e,t,a,n){let o=0;if(e.name==="exponential")o=Gt(t,e.base,a,n);else if(e.name==="linear")o=Gt(t,1,a,n);else if(e.name==="cubic-bezier"){const i=e.controlPoints;o=new Mi(i[0],i[1],i[2],i[3]).solve(Gt(t,1,a,n))}return o}static parse(e,t){let[a,n,o,...i]=e;if(!Array.isArray(n)||n.length===0)return t.error("Expected an interpolation type expression.",1);if(n[0]==="linear")n={name:"linear"};else if(n[0]==="exponential"){const u=n[1];if(typeof u!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:u}}else if(n[0]==="cubic-bezier"){const u=n.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:u}}else return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,g),!o)return null;const s=[];let l=null;a==="interpolate-hcl"||a==="interpolate-lab"?l=ie:t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(let u=0;u<i.length;u+=2){const c=i[u],p=i[u+1],h=u+3,d=u+4;if(typeof c!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(s.length&&s[s.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);const m=t.parse(p,d,l);if(!m)return null;l=l||m.type,s.push([c,m])}return!Ee(l,g)&&!Ee(l,Lt)&&!Ee(l,ie)&&!Ee(l,Tt)&&!Ee(l,Mt)&&!Ee(l,W(g))?t.error(`Type ${U(l)} is not interpolatable.`):new le(l,a,n,o,s)}evaluate(e){const t=this.labels,a=this.outputs;if(t.length===1)return a[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return a[0].evaluate(e);const o=t.length;if(n>=t[o-1])return a[o-1].evaluate(e);const i=qa(t,n),s=t[i],l=t[i+1],u=le.interpolationFactor(this.interpolation,n,s,l),c=a[i].evaluate(e),p=a[i+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Le(c,p,u);case"color":return N.interpolate(c,p,u);case"padding":return te.interpolate(c,p,u);case"variableAnchorOffsetCollection":return se.interpolate(c,p,u);case"array":return mt(c,p,u);case"projectionDefinition":return Q.interpolate(c,p,u)}case"interpolate-hcl":return N.interpolate(c,p,u,"hcl");case"interpolate-lab":return N.interpolate(c,p,u,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Gt(r,e,t,a){const n=a-t,o=r-t;return n===0?0:e===1?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}class Ze{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let a=null;const n=t.expectedType;n&&n.kind!=="value"&&(a=n);const o=[];for(const i of e.slice(1)){const s=t.parse(i,1+o.length,a,void 0,{typeAnnotation:"omit"});if(!s)return null;a=a||s.type,o.push(s)}if(!a)throw new Error("No output type");return n&&o.some(i=>Ke(n,i.type))?new Ze(_,o):new Ze(a,o)}evaluate(e){let t=null,a=0,n;for(const o of this.args)if(a++,t=o.evaluate(e),t&&t instanceof ge&&!t.available&&(n||(n=t.name),t=null,a===this.args.length&&(t=n)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function ta(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ii(r,e,t){return e===t}function Ei(r,e,t){return e!==t}function zi(r,e,t){return e<t}function Ri(r,e,t){return e>t}function Pi(r,e,t){return e<=t}function Ni(r,e,t){return e>=t}function Ba(r,e,t,a){return a.compare(e,t)===0}function $i(r,e,t,a){return!Ba(r,e,t,a)}function Ui(r,e,t,a){return a.compare(e,t)<0}function Di(r,e,t,a){return a.compare(e,t)>0}function ji(r,e,t,a){return a.compare(e,t)<=0}function Oi(r,e,t,a){return a.compare(e,t)>=0}function Oe(r,e,t){const a=r!=="=="&&r!=="!=";return class Ha{constructor(o,i,s){this.type=L,this.lhs=o,this.rhs=i,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||i.type.kind==="value"}static parse(o,i){if(o.length!==3&&o.length!==4)return i.error("Expected two or three arguments.");const s=o[0];let l=i.parse(o[1],1,_);if(!l)return null;if(!ta(s,l.type))return i.concat(1).error(`"${s}" comparisons are not supported for type '${U(l.type)}'.`);let u=i.parse(o[2],2,_);if(!u)return null;if(!ta(s,u.type))return i.concat(2).error(`"${s}" comparisons are not supported for type '${U(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return i.error(`Cannot compare types '${U(l.type)}' and '${U(u.type)}'.`);a&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new ee(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new ee(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return i.error("Cannot use collator to compare non-string types.");if(c=i.parse(o[3],3,_t),!c)return null}return new Ha(l,u,c)}evaluate(o){const i=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(a&&this.hasUntypedArgument){const l=q(i),u=q(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new F(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const l=q(i),u=q(s);if(l.kind!=="string"||u.kind!=="string")return e(o,i,s)}return this.collator?t(o,i,s,this.collator.evaluate(o)):e(o,i,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Fi=Oe("==",Ii,Ba),qi=Oe("!=",Ei,$i),Bi=Oe("<",zi,Ui),Hi=Oe(">",Ri,Di),Vi=Oe("<=",Pi,ji),Gi=Oe(">=",Ni,Oi);class Pt{constructor(e,t,a){this.type=_t,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return t.error("Collator options argument must be an object.");const n=t.parse(a["case-sensitive"]===void 0?!1:a["case-sensitive"],1,L);if(!n)return null;const o=t.parse(a["diacritic-sensitive"]===void 0?!1:a["diacritic-sensitive"],1,L);if(!o)return null;let i=null;return a.locale&&(i=t.parse(a.locale,1,C),!i)?null:new Pt(n,o,i)}evaluate(e){return new vr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class kr{constructor(e,t,a,n,o){this.type=C,this.number=e,this.locale=t,this.currency=a,this.minFractionDigits=n,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const a=t.parse(e[1],1,g);if(!a)return null;const n=e[2];if(typeof n!="object"||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let o=null;if(n.locale&&(o=t.parse(n.locale,1,C),!o))return null;let i=null;if(n.currency&&(i=t.parse(n.currency,1,C),!i))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,g),!s))return null;let l=null;return n["max-fraction-digits"]&&(l=t.parse(n["max-fraction-digits"],1,g),!l)?null:new kr(a,o,i,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Ar{constructor(e){this.type=Ct,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return t.error("First argument must be an image or text section.");const n=[];let o=!1;for(let i=1;i<=e.length-1;++i){const s=e[i];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=t.parse(s["font-scale"],1,g),!l))return null;let u=null;if(s["text-font"]&&(u=t.parse(s["text-font"],1,W(C)),!u))return null;let c=null;if(s["text-color"]&&(c=t.parse(s["text-color"],1,ie),!c))return null;let p=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!ki.includes(s["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(p=t.parse(s["vertical-align"],1,C),!p)return null}const h=n[n.length-1];h.scale=l,h.font=u,h.textColor=c,h.verticalAlign=p}else{const l=t.parse(e[i],1,_);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ar(n)}evaluate(e){const t=a=>{const n=a.content.evaluate(e);return q(n)===et?new tr("",n,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(e):null):new tr(Ge(n),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null,a.verticalAlign?a.verticalAlign.evaluate(e):null)};return new de(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class Lr{constructor(e){this.type=et,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const a=t.parse(e[1],1,C);return a?new Lr(a):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),a=ge.fromString(t);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(t)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}}class _r{constructor(e){this.type=g,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=t.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${U(a.type)} instead.`):new _r(a):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new F(`Expected value to be of type string or array, but found ${U(q(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const ue=8192;function Ki(r,e){const t=Wi(r[0]),a=Ji(r[1]),n=Math.pow(2,e.z);return[Math.round(t*n*ue),Math.round(a*n*ue)]}function Cr(r,e){const t=Math.pow(2,e.z),a=(r[0]/ue+e.x)/t,n=(r[1]/ue+e.y)/t;return[Zi(a),Yi(n)]}function Wi(r){return(180+r)/360}function Zi(r){return r*360-180}function Ji(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Yi(r){return 360/Math.PI*Math.atan(Math.exp((180-r*360)*Math.PI/180))-90}function tt(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function Je(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Xi(r,e,t){return e[1]>r[1]!=t[1]>r[1]&&r[0]<(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1])+e[0]}function Qi(r,e,t){const a=r[0]-e[0],n=r[1]-e[1],o=r[0]-t[0],i=r[1]-t[1];return a*i-o*n===0&&a*o<=0&&n*i<=0}function Nt(r,e,t,a){const n=[e[0]-r[0],e[1]-r[1]],o=[a[0]-t[0],a[1]-t[1]];return as(o,n)===0?!1:!!(ra(r,e,t,a)&&ra(t,a,r,e))}function es(r,e,t){for(const a of t)for(let n=0;n<a.length-1;++n)if(Nt(r,e,a[n],a[n+1]))return!0;return!1}function Fe(r,e,t=!1){let a=!1;for(const n of e)for(let o=0;o<n.length-1;o++){if(Qi(r,n[o],n[o+1]))return t;Xi(r,n[o],n[o+1])&&(a=!a)}return a}function ts(r,e){for(const t of e)if(Fe(r,t))return!0;return!1}function Va(r,e){for(const t of r)if(!Fe(t,e))return!1;for(let t=0;t<r.length-1;++t)if(es(r[t],r[t+1],e))return!1;return!0}function rs(r,e){for(const t of e)if(Va(r,t))return!0;return!1}function as(r,e){return r[0]*e[1]-r[1]*e[0]}function ra(r,e,t,a){const n=r[0]-t[0],o=r[1]-t[1],i=e[0]-t[0],s=e[1]-t[1],l=a[0]-t[0],u=a[1]-t[1],c=n*u-l*o,p=i*u-l*s;return c>0&&p<0||c<0&&p>0}function Tr(r,e,t){const a=[];for(let n=0;n<r.length;n++){const o=[];for(let i=0;i<r[n].length;i++){const s=Ki(r[n][i],t);tt(e,s),o.push(s)}a.push(o)}return a}function Ga(r,e,t){const a=[];for(let n=0;n<r.length;n++){const o=Tr(r[n],e,t);a.push(o)}return a}function Ka(r,e,t,a){if(r[0]<t[0]||r[0]>t[2]){const n=a*.5;let o=r[0]-t[0]>n?-a:t[0]-r[0]>n?a:0;o===0&&(o=r[0]-t[2]>n?-a:t[2]-r[0]>n?a:0),r[0]+=o}tt(e,r)}function ns(r){r[0]=r[1]=1/0,r[2]=r[3]=-1/0}function aa(r,e,t,a){const n=Math.pow(2,a.z)*ue,o=[a.x*ue,a.y*ue],i=[];for(const s of r)for(const l of s){const u=[l.x+o[0],l.y+o[1]];Ka(u,e,t,n),i.push(u)}return i}function na(r,e,t,a){const n=Math.pow(2,a.z)*ue,o=[a.x*ue,a.y*ue],i=[];for(const s of r){const l=[];for(const u of s){const c=[u.x+o[0],u.y+o[1]];tt(e,c),l.push(c)}i.push(l)}if(e[2]-e[0]<=n/2){ns(e);for(const s of i)for(const l of s)Ka(l,e,t,n)}return i}function os(r,e){const t=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=r.canonicalID();if(e.type==="Polygon"){const o=Tr(e.coordinates,a,n),i=aa(r.geometry(),t,a,n);if(!Je(t,a))return!1;for(const s of i)if(!Fe(s,o))return!1}if(e.type==="MultiPolygon"){const o=Ga(e.coordinates,a,n),i=aa(r.geometry(),t,a,n);if(!Je(t,a))return!1;for(const s of i)if(!ts(s,o))return!1}return!0}function is(r,e){const t=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=r.canonicalID();if(e.type==="Polygon"){const o=Tr(e.coordinates,a,n),i=na(r.geometry(),t,a,n);if(!Je(t,a))return!1;for(const s of i)if(!Va(s,o))return!1}if(e.type==="MultiPolygon"){const o=Ga(e.coordinates,a,n),i=na(r.geometry(),t,a,n);if(!Je(t,a))return!1;for(const s of i)if(!rs(s,o))return!1}return!0}class _e{constructor(e,t){this.type=L,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(We(e[1])){const a=e[1];if(a.type==="FeatureCollection"){const n=[];for(const o of a.features){const{type:i,coordinates:s}=o.geometry;i==="Polygon"&&n.push(s),i==="MultiPolygon"&&n.push(...s)}if(n.length){const o={type:"MultiPolygon",coordinates:n};return new _e(a,o)}}else if(a.type==="Feature"){const n=a.geometry.type;if(n==="Polygon"||n==="MultiPolygon")return new _e(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new _e(a,a)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return os(e,this.geometries);if(e.geometryType()==="LineString")return is(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Wa{constructor(e=[],t=(a,n)=>a<n?-1:a>n?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:a}=this,n=t[e];for(;e>0;){const o=e-1>>1,i=t[o];if(a(n,i)>=0)break;t[e]=i,e=o}t[e]=n}_down(e){const{data:t,compare:a}=this,n=this.length>>1,o=t[e];for(;e<n;){let i=(e<<1)+1;const s=i+1;if(s<this.length&&a(t[s],t[i])<0&&(i=s),a(t[i],o)>=0)break;t[e]=t[i],e=i}t[e]=o}}function ss(r,e){if(r.length<=1)return[r];const t=[];let a,n;for(const o of r){const i=ls(o);i!==0&&(o.area=Math.abs(i),n===void 0&&(n=i<0),n===i<0?(a&&t.push(a),a=[o]):a.push(o))}return a&&t.push(a),t}function ls(r){let e=0;for(let t=0,a=r.length,n=a-1,o,i;t<a;n=t++)o=r[t],i=r[n],e+=(i.x-o.x)*(o.y+i.y);return e}const us=6378.137,oa=1/298.257223563,ia=oa*(2-oa),sa=Math.PI/180;class Mr{constructor(e){const t=sa*us*1e3,a=Math.cos(e*sa),n=1/(1-ia*(1-a*a)),o=Math.sqrt(n);this.kx=t*o*a,this.ky=t*o*n*(1-ia)}distance(e,t){const a=this.wrap(e[0]-t[0])*this.kx,n=(e[1]-t[1])*this.ky;return Math.sqrt(a*a+n*n)}pointOnLine(e,t){let a=1/0,n,o,i,s;for(let l=0;l<e.length-1;l++){let u=e[l][0],c=e[l][1],p=this.wrap(e[l+1][0]-u)*this.kx,h=(e[l+1][1]-c)*this.ky,d=0;(p!==0||h!==0)&&(d=(this.wrap(t[0]-u)*this.kx*p+(t[1]-c)*this.ky*h)/(p*p+h*h),d>1?(u=e[l+1][0],c=e[l+1][1]):d>0&&(u+=p/this.kx*d,c+=h/this.ky*d)),p=this.wrap(t[0]-u)*this.kx,h=(t[1]-c)*this.ky;const m=p*p+h*h;m<a&&(a=m,n=u,o=c,i=l,s=d)}return{point:[n,o],index:i,t:Math.max(0,Math.min(1,s))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const rr=100,ar=50;function Za(r,e){return e[0]-r[0]}function gt(r){return r[1]-r[0]+1}function me(r,e){return r[1]>=r[0]&&r[1]<e}function nr(r,e){if(r[0]>r[1])return[null,null];const t=gt(r);if(e){if(t===2)return[r,null];const n=Math.floor(t/2);return[[r[0],r[0]+n],[r[0]+n,r[1]]]}if(t===1)return[r,null];const a=Math.floor(t/2)-1;return[[r[0],r[0]+a],[r[0]+a+1,r[1]]]}function or(r,e){if(!me(e,r.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let a=e[0];a<=e[1];++a)tt(t,r[a]);return t}function ir(r){const e=[1/0,1/0,-1/0,-1/0];for(const t of r)for(const a of t)tt(e,a);return e}function la(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function Ir(r,e,t){if(!la(r)||!la(e))return NaN;let a=0,n=0;return r[2]<e[0]&&(a=e[0]-r[2]),r[0]>e[2]&&(a=r[0]-e[2]),r[1]>e[3]&&(n=r[1]-e[3]),r[3]<e[1]&&(n=e[1]-r[3]),t.distance([0,0],[a,n])}function ke(r,e,t){const a=t.pointOnLine(e,r);return t.distance(r,a.point)}function Er(r,e,t,a,n){const o=Math.min(ke(r,[t,a],n),ke(e,[t,a],n)),i=Math.min(ke(t,[r,e],n),ke(a,[r,e],n));return Math.min(o,i)}function cs(r,e,t,a,n){if(!(me(e,r.length)&&me(a,t.length)))return 1/0;let o=1/0;for(let i=e[0];i<e[1];++i){const s=r[i],l=r[i+1];for(let u=a[0];u<a[1];++u){const c=t[u],p=t[u+1];if(Nt(s,l,c,p))return 0;o=Math.min(o,Er(s,l,c,p,n))}}return o}function ps(r,e,t,a,n){if(!(me(e,r.length)&&me(a,t.length)))return NaN;let o=1/0;for(let i=e[0];i<=e[1];++i)for(let s=a[0];s<=a[1];++s)if(o=Math.min(o,n.distance(r[i],t[s])),o===0)return o;return o}function ds(r,e,t){if(Fe(r,e,!0))return 0;let a=1/0;for(const n of e){const o=n[0],i=n[n.length-1];if(o!==i&&(a=Math.min(a,ke(r,[i,o],t)),a===0))return a;const s=t.pointOnLine(n,r);if(a=Math.min(a,t.distance(r,s.point)),a===0)return a}return a}function fs(r,e,t,a){if(!me(e,r.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Fe(r[o],t,!0))return 0;let n=1/0;for(let o=e[0];o<e[1];++o){const i=r[o],s=r[o+1];for(const l of t)for(let u=0,c=l.length,p=c-1;u<c;p=u++){const h=l[p],d=l[u];if(Nt(i,s,h,d))return 0;n=Math.min(n,Er(i,s,h,d,a))}}return n}function ua(r,e){for(const t of r)for(const a of t)if(Fe(a,e,!0))return!0;return!1}function ms(r,e,t,a=1/0){const n=ir(r),o=ir(e);if(a!==1/0&&Ir(n,o,t)>=a)return a;if(Je(n,o)){if(ua(r,e))return 0}else if(ua(e,r))return 0;let i=1/0;for(const s of r)for(let l=0,u=s.length,c=u-1;l<u;c=l++){const p=s[c],h=s[l];for(const d of e)for(let m=0,f=d.length,v=f-1;m<f;v=m++){const b=d[v],x=d[m];if(Nt(p,h,b,x))return 0;i=Math.min(i,Er(p,h,b,x,t))}}return i}function ca(r,e,t,a,n,o){if(!o)return;const i=Ir(or(a,o),n,t);i<e&&r.push([i,o,[0,0]])}function lt(r,e,t,a,n,o,i){if(!o||!i)return;const s=Ir(or(a,o),or(n,i),t);s<e&&r.push([s,o,i])}function vt(r,e,t,a,n=1/0){let o=Math.min(a.distance(r[0],t[0][0]),n);if(o===0)return o;const i=new Wa([[0,[0,r.length-1],[0,0]]],Za),s=ir(t);for(;i.length>0;){const l=i.pop();if(l[0]>=o)continue;const u=l[1],c=e?ar:rr;if(gt(u)<=c){if(!me(u,r.length))return NaN;if(e){const p=fs(r,u,t,a);if(isNaN(p)||p===0)return p;o=Math.min(o,p)}else for(let p=u[0];p<=u[1];++p){const h=ds(r[p],t,a);if(o=Math.min(o,h),o===0)return 0}}else{const p=nr(u,e);ca(i,o,a,r,s,p[0]),ca(i,o,a,r,s,p[1])}}return o}function bt(r,e,t,a,n,o=1/0){let i=Math.min(o,n.distance(r[0],t[0]));if(i===0)return i;const s=new Wa([[0,[0,r.length-1],[0,t.length-1]]],Za);for(;s.length>0;){const l=s.pop();if(l[0]>=i)continue;const u=l[1],c=l[2],p=e?ar:rr,h=a?ar:rr;if(gt(u)<=p&&gt(c)<=h){if(!me(u,r.length)&&me(c,t.length))return NaN;let d;if(e&&a)d=cs(r,u,t,c,n),i=Math.min(i,d);else if(e&&!a){const m=r.slice(u[0],u[1]+1);for(let f=c[0];f<=c[1];++f)if(d=ke(t[f],m,n),i=Math.min(i,d),i===0)return i}else if(!e&&a){const m=t.slice(c[0],c[1]+1);for(let f=u[0];f<=u[1];++f)if(d=ke(r[f],m,n),i=Math.min(i,d),i===0)return i}else d=ps(r,u,t,c,n),i=Math.min(i,d)}else{const d=nr(u,e),m=nr(c,a);lt(s,i,n,r,t,d[0],m[0]),lt(s,i,n,r,t,d[0],m[1]),lt(s,i,n,r,t,d[1],m[0]),lt(s,i,n,r,t,d[1],m[1])}}return i}function hs(r,e){const t=r.geometry(),a=t.flat().map(i=>Cr([i.x,i.y],r.canonical));if(t.length===0)return NaN;const n=new Mr(a[0][1]);let o=1/0;for(const i of e){switch(i.type){case"Point":o=Math.min(o,bt(a,!1,[i.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,bt(a,!1,i.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,vt(a,!1,i.coordinates,n,o));break}if(o===0)return o}return o}function ys(r,e){const t=r.geometry(),a=t.flat().map(i=>Cr([i.x,i.y],r.canonical));if(t.length===0)return NaN;const n=new Mr(a[0][1]);let o=1/0;for(const i of e){switch(i.type){case"Point":o=Math.min(o,bt(a,!0,[i.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,bt(a,!0,i.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,vt(a,!0,i.coordinates,n,o));break}if(o===0)return o}return o}function gs(r,e){const t=r.geometry();if(t.length===0||t[0].length===0)return NaN;const a=ss(t).map(i=>i.map(s=>s.map(l=>Cr([l.x,l.y],r.canonical)))),n=new Mr(a[0][0][0][1]);let o=1/0;for(const i of e)for(const s of a){switch(i.type){case"Point":o=Math.min(o,vt([i.coordinates],!1,s,n,o));break;case"LineString":o=Math.min(o,vt(i.coordinates,!0,s,n,o));break;case"Polygon":o=Math.min(o,ms(s,i.coordinates,n,o));break}if(o===0)return o}return o}function Kt(r){return r.type==="MultiPolygon"?r.coordinates.map(e=>({type:"Polygon",coordinates:e})):r.type==="MultiLineString"?r.coordinates.map(e=>({type:"LineString",coordinates:e})):r.type==="MultiPoint"?r.coordinates.map(e=>({type:"Point",coordinates:e})):[r]}class Ce{constructor(e,t){this.type=g,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(We(e[1])){const a=e[1];if(a.type==="FeatureCollection")return new Ce(a,a.features.map(n=>Kt(n.geometry)).flat());if(a.type==="Feature")return new Ce(a,Kt(a.geometry));if("type"in a&&"coordinates"in a)return new Ce(a,Kt(a))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return hs(e,this.geometries);if(e.geometryType()==="LineString")return ys(e,this.geometries);if(e.geometryType()==="Polygon")return gs(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const zr={"==":Fi,"!=":qi,">":Hi,"<":Bi,">=":Gi,"<=":Vi,array:ee,at:br,boolean:ee,case:Sr,coalesce:Ze,collator:Pt,format:Ar,image:Lr,in:xr,"index-of":ht,interpolate:le,"interpolate-hcl":le,"interpolate-lab":le,length:_r,let:Et,literal:De,match:wr,number:ee,"number-format":kr,object:ee,slice:yt,step:Rt,string:ee,"to-boolean":he,"to-color":he,"to-number":he,"to-string":he,var:zt,within:_e,distance:Ce};class re{constructor(e,t,a,n){this.name=e,this.type=t,this._evaluate=a,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const a=e[0],n=re.definitions[a];if(!n)return t.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(n)?n[0]:n.type,i=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=i.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of s){l=new It(t.registry,xt,t.path,null,t.scope);const p=[];let h=!1;for(let d=1;d<e.length;d++){const m=e[d],f=Array.isArray(u)?u[d-1]:u.type,v=l.parse(m,1+p.length,f);if(!v){h=!0;break}p.push(v)}if(!h){if(Array.isArray(u)&&u.length!==p.length){l.error(`Expected ${u.length} arguments, but found ${p.length} instead.`);continue}for(let d=0;d<p.length;d++){const m=Array.isArray(u)?u[d]:u.type,f=p[d];l.concat(d+1).checkSubtype(m,f.type)}if(l.errors.length===0)return new re(a,o,c,p)}}if(s.length===1)t.errors.push(...l.errors);else{const u=(s.length?s:i).map(([p])=>bs(p)).join(" | "),c=[];for(let p=1;p<e.length;p++){const h=t.parse(e[p],1+c.length);if(!h)return null;c.push(U(h.type))}t.error(`Expected arguments of type ${u}, but found (${c.join(", ")}) instead.`)}return null}static register(e,t){re.definitions=t;for(const a in t)e[a]=re}}function pa(r,[e,t,a,n]){e=e.evaluate(r),t=t.evaluate(r),a=a.evaluate(r);const o=n?n.evaluate(r):1,i=Oa(e,t,a,o);if(i)throw new F(i);return new N(e/255,t/255,a/255,o,!1)}function da(r,e){return r in e}function Wt(r,e){const t=e[r];return typeof t>"u"?null:t}function vs(r,e,t,a){for(;t<=a;){const n=t+a>>1;if(e[n]===r)return!0;e[n]>r?a=n-1:t=n+1}return!1}function xe(r){return{type:r}}re.register(zr,{error:[fi,[C],(r,[e])=>{throw new F(e.evaluate(r))}],typeof:[C,[_],(r,[e])=>U(q(e.evaluate(r)))],"to-rgba":[W(g,4),[ie],(r,[e])=>{const[t,a,n,o]=e.evaluate(r).rgb;return[t*255,a*255,n*255,o]}],rgb:[ie,[g,g,g],pa],rgba:[ie,[g,g,g,g],pa],has:{type:L,overloads:[[[C],(r,[e])=>da(e.evaluate(r),r.properties())],[[C,$e],(r,[e,t])=>da(e.evaluate(r),t.evaluate(r))]]},get:{type:_,overloads:[[[C],(r,[e])=>Wt(e.evaluate(r),r.properties())],[[C,$e],(r,[e,t])=>Wt(e.evaluate(r),t.evaluate(r))]]},"feature-state":[_,[C],(r,[e])=>Wt(e.evaluate(r),r.featureState||{})],properties:[$e,[],r=>r.properties()],"geometry-type":[C,[],r=>r.geometryType()],id:[_,[],r=>r.id()],zoom:[g,[],r=>r.globals.zoom],"heatmap-density":[g,[],r=>r.globals.heatmapDensity||0],"line-progress":[g,[],r=>r.globals.lineProgress||0],accumulated:[_,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[g,xe(g),(r,e)=>{let t=0;for(const a of e)t+=a.evaluate(r);return t}],"*":[g,xe(g),(r,e)=>{let t=1;for(const a of e)t*=a.evaluate(r);return t}],"-":{type:g,overloads:[[[g,g],(r,[e,t])=>e.evaluate(r)-t.evaluate(r)],[[g],(r,[e])=>-e.evaluate(r)]]},"/":[g,[g,g],(r,[e,t])=>e.evaluate(r)/t.evaluate(r)],"%":[g,[g,g],(r,[e,t])=>e.evaluate(r)%t.evaluate(r)],ln2:[g,[],()=>Math.LN2],pi:[g,[],()=>Math.PI],e:[g,[],()=>Math.E],"^":[g,[g,g],(r,[e,t])=>Math.pow(e.evaluate(r),t.evaluate(r))],sqrt:[g,[g],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[g,[g],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[g,[g],(r,[e])=>Math.log(e.evaluate(r))],log2:[g,[g],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[g,[g],(r,[e])=>Math.sin(e.evaluate(r))],cos:[g,[g],(r,[e])=>Math.cos(e.evaluate(r))],tan:[g,[g],(r,[e])=>Math.tan(e.evaluate(r))],asin:[g,[g],(r,[e])=>Math.asin(e.evaluate(r))],acos:[g,[g],(r,[e])=>Math.acos(e.evaluate(r))],atan:[g,[g],(r,[e])=>Math.atan(e.evaluate(r))],min:[g,xe(g),(r,e)=>Math.min(...e.map(t=>t.evaluate(r)))],max:[g,xe(g),(r,e)=>Math.max(...e.map(t=>t.evaluate(r)))],abs:[g,[g],(r,[e])=>Math.abs(e.evaluate(r))],round:[g,[g],(r,[e])=>{const t=e.evaluate(r);return t<0?-Math.round(-t):Math.round(t)}],floor:[g,[g],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[g,[g],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[L,[C,_],(r,[e,t])=>r.properties()[e.value]===t.value],"filter-id-==":[L,[_],(r,[e])=>r.id()===e.value],"filter-type-==":[L,[C],(r,[e])=>r.geometryType()===e.value],"filter-<":[L,[C,_],(r,[e,t])=>{const a=r.properties()[e.value],n=t.value;return typeof a==typeof n&&a<n}],"filter-id-<":[L,[_],(r,[e])=>{const t=r.id(),a=e.value;return typeof t==typeof a&&t<a}],"filter->":[L,[C,_],(r,[e,t])=>{const a=r.properties()[e.value],n=t.value;return typeof a==typeof n&&a>n}],"filter-id->":[L,[_],(r,[e])=>{const t=r.id(),a=e.value;return typeof t==typeof a&&t>a}],"filter-<=":[L,[C,_],(r,[e,t])=>{const a=r.properties()[e.value],n=t.value;return typeof a==typeof n&&a<=n}],"filter-id-<=":[L,[_],(r,[e])=>{const t=r.id(),a=e.value;return typeof t==typeof a&&t<=a}],"filter->=":[L,[C,_],(r,[e,t])=>{const a=r.properties()[e.value],n=t.value;return typeof a==typeof n&&a>=n}],"filter-id->=":[L,[_],(r,[e])=>{const t=r.id(),a=e.value;return typeof t==typeof a&&t>=a}],"filter-has":[L,[_],(r,[e])=>e.value in r.properties()],"filter-has-id":[L,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[L,[W(C)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[L,[W(_)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[L,[C,W(_)],(r,[e,t])=>t.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[L,[C,W(_)],(r,[e,t])=>vs(r.properties()[e.value],t.value,0,t.value.length-1)],all:{type:L,overloads:[[[L,L],(r,[e,t])=>e.evaluate(r)&&t.evaluate(r)],[xe(L),(r,e)=>{for(const t of e)if(!t.evaluate(r))return!1;return!0}]]},any:{type:L,overloads:[[[L,L],(r,[e,t])=>e.evaluate(r)||t.evaluate(r)],[xe(L),(r,e)=>{for(const t of e)if(t.evaluate(r))return!0;return!1}]]},"!":[L,[L],(r,[e])=>!e.evaluate(r)],"is-supported-script":[L,[C],(r,[e])=>{const t=r.globals&&r.globals.isSupportedScript;return t?t(e.evaluate(r)):!0}],upcase:[C,[C],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[C,[C],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[C,xe(_),(r,e)=>e.map(t=>Ge(t.evaluate(r))).join("")],"resolved-locale":[C,[_t],(r,[e])=>e.evaluate(r).resolvedLocale()]});function bs(r){return Array.isArray(r)?`(${r.map(U).join(", ")})`:`(${U(r.type)}...)`}function xt(r){if(r instanceof zt)return xt(r.boundExpression);if(r instanceof re&&r.name==="error"||r instanceof Pt||r instanceof _e||r instanceof Ce)return!1;const e=r instanceof he||r instanceof ee;let t=!0;return r.eachChild(a=>{e?t=t&&xt(a):t=t&&a instanceof De}),t?$t(r)&&Ut(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function $t(r){if(r instanceof re&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof _e||r instanceof Ce)return!1;let e=!0;return r.eachChild(t=>{e&&!$t(t)&&(e=!1)}),e}function Ye(r){if(r instanceof re&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(t=>{e&&!Ye(t)&&(e=!1)}),e}function Ut(r,e){if(r instanceof re&&e.indexOf(r.name)>=0)return!1;let t=!0;return r.eachChild(a=>{t&&!Ut(a,e)&&(t=!1)}),t}function sr(r){return{result:"success",value:r}}function Pe(r){return{result:"error",value:r}}function wt(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ja(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Ya(r){return!!r.expression&&r.expression.interpolated}function E(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Rr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}class xs{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Fa,this._defaultValue=t?ks(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,a,n,o,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=a,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)}evaluate(e,t,a,n,o,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=a||null,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new F(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function Xa(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in zr}function Qa(r,e){const t=new It(zr,xt,[],e?Ss(e):void 0),a=t.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?sr(new xs(a,e)):Pe(t.errors)}class fa{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Ye(t.expression)}evaluateWithoutErrorHandling(e,t,a,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,a,n,o,i)}evaluate(e,t,a,n,o,i){return this._styleExpression.evaluate(e,t,a,n,o,i)}}class ma{constructor(e,t,a,n){this.kind=e,this.zoomStops=a,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Ye(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,a,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,a,n,o,i)}evaluate(e,t,a,n,o,i){return this._styleExpression.evaluate(e,t,a,n,o,i)}interpolationFactor(e,t,a){return this.interpolationType?le.interpolationFactor(this.interpolationType,e,t,a):0}}function ws(r,e){const t=Qa(r,e);if(t.result==="error")return t;const a=t.value.expression,n=$t(a);if(!n&&!wt(e))return Pe([new oe("","data expressions not supported")]);const o=Ut(a,["zoom"]);if(!o&&!Ja(e))return Pe([new oe("","zoom expressions not supported")]);const i=ct(a);if(!i&&!o)return Pe([new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof oe)return Pe([i]);if(i instanceof le&&!Ya(e))return Pe([new oe("",'"interpolate" expressions cannot be used with this property')]);if(!i)return sr(n?new fa("constant",t.value):new fa("source",t.value));const s=i instanceof le?i.interpolation:void 0;return sr(n?new ma("camera",t.value,i.labels,s):new ma("composite",t.value,i.labels,s))}function ct(r){let e=null;if(r instanceof Et)e=ct(r.result);else if(r instanceof Ze){for(const t of r.args)if(e=ct(t),e)break}else(r instanceof Rt||r instanceof le)&&r.input instanceof re&&r.input.name==="zoom"&&(e=r);return e instanceof oe||r.eachChild(t=>{const a=ct(t);a instanceof oe?e=a:!e&&a?e=new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ss(r){const e={color:ie,string:C,number:g,enum:C,boolean:L,formatted:Ct,padding:Tt,projectionDefinition:Lt,resolvedImage:et,variableAnchorOffsetCollection:Mt};return r.type==="array"?W(e[r.value]||_,r.length):e[r.type]}function ks(r){return r.type==="color"&&Rr(r.default)?new N(0,0,0,0):r.type==="color"?N.parse(r.default)||null:r.type==="padding"?te.parse(r.default)||null:r.type==="variableAnchorOffsetCollection"?se.parse(r.default)||null:r.type==="projectionDefinition"?Q.parse(r.default)||null:r.default===void 0?null:r.default}function en(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!en(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function tn(r){const e=r.key,t=r.value;return t?[new y(e,t,"constants have been deprecated as of v8")]:[]}function j(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Me(r){if(Array.isArray(r))return r.map(Me);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const t in r)e[t]=Me(r[t]);return e}return j(r)}function Y(r){const e=r.key,t=r.value,a=r.valueSpec||{},n=r.objectElementValidators||{},o=r.style,i=r.styleSpec,s=r.validateSpec;let l=[];const u=E(t);if(u!=="object")return[new y(e,t,`object expected, ${u} found`)];for(const c in t){const p=c.split(".")[0],h=a[p]||a["*"];let d;if(n[p])d=n[p];else if(a[p])d=s;else if(n["*"])d=n["*"];else if(a["*"])d=s;else{l.push(new y(e,t[c],`unknown property "${c}"`));continue}l=l.concat(d({key:(e&&`${e}.`)+c,value:t[c],valueSpec:h,style:o,styleSpec:i,object:t,objectKey:c,validateSpec:s},t))}for(const c in a)n[c]||a[c].required&&a[c].default===void 0&&t[c]===void 0&&l.push(new y(e,t,`missing required property "${c}"`));return l}function Pr(r){const e=r.value,t=r.valueSpec,a=r.validateSpec,n=r.style,o=r.styleSpec,i=r.key,s=r.arrayElementValidator||a;if(E(e)!=="array")return[new y(i,e,`array expected, ${E(e)} found`)];if(t.length&&e.length!==t.length)return[new y(i,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new y(i,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let l={type:t.value,values:t.values};o.$version<7&&(l.function=t.function),E(t.value)==="object"&&(l=t.value);let u=[];for(let c=0;c<e.length;c++)u=u.concat(s({array:e,arrayIndex:c,value:e[c],valueSpec:l,validateSpec:r.validateSpec,style:n,styleSpec:o,key:`${i}[${c}]`}));return u}function Nr(r){const e=r.key,t=r.value,a=r.valueSpec;let n=E(t);return n==="number"&&t!==t&&(n="NaN"),n!=="number"?[new y(e,t,`number expected, ${n} found`)]:"minimum"in a&&t<a.minimum?[new y(e,t,`${t} is less than the minimum value ${a.minimum}`)]:"maximum"in a&&t>a.maximum?[new y(e,t,`${t} is greater than the maximum value ${a.maximum}`)]:[]}function rn(r){const e=r.valueSpec,t=j(r.value.type);let a,n={},o,i;const s=t!=="categorical"&&r.value.property===void 0,l=!s,u=E(r.value.stops)==="array"&&E(r.value.stops[0])==="array"&&E(r.value.stops[0][0])==="object",c=Y({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:p,default:m}});return t==="identity"&&s&&c.push(new y(r.key,r.value,'missing required property "property"')),t!=="identity"&&!r.value.stops&&c.push(new y(r.key,r.value,'missing required property "stops"')),t==="exponential"&&r.valueSpec.expression&&!Ya(r.valueSpec)&&c.push(new y(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(l&&!wt(r.valueSpec)?c.push(new y(r.key,r.value,"property functions not supported")):s&&!Ja(r.valueSpec)&&c.push(new y(r.key,r.value,"zoom functions not supported"))),(t==="categorical"||u)&&r.value.property===void 0&&c.push(new y(r.key,r.value,'"property" property is required')),c;function p(f){if(t==="identity")return[new y(f.key,f.value,'identity function may not have a "stops" property')];let v=[];const b=f.value;return v=v.concat(Pr({key:f.key,value:b,valueSpec:f.valueSpec,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,arrayElementValidator:h})),E(b)==="array"&&b.length===0&&v.push(new y(f.key,b,"array must have at least one stop")),v}function h(f){let v=[];const b=f.value,x=f.key;if(E(b)!=="array")return[new y(x,b,`array expected, ${E(b)} found`)];if(b.length!==2)return[new y(x,b,`array length 2 expected, length ${b.length} found`)];if(u){if(E(b[0])!=="object")return[new y(x,b,`object expected, ${E(b[0])} found`)];if(b[0].zoom===void 0)return[new y(x,b,"object stop key must have zoom")];if(b[0].value===void 0)return[new y(x,b,"object stop key must have value")];if(i&&i>j(b[0].zoom))return[new y(x,b[0].zoom,"stop zoom values must appear in ascending order")];j(b[0].zoom)!==i&&(i=j(b[0].zoom),o=void 0,n={}),v=v.concat(Y({key:`${x}[0]`,value:b[0],valueSpec:{zoom:{}},validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{zoom:Nr,value:d}}))}else v=v.concat(d({key:`${x}[0]`,value:b[0],validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec},b));return Xa(Me(b[1]))?v.concat([new y(`${x}[1]`,b[1],"expressions are not allowed in function stops.")]):v.concat(f.validateSpec({key:`${x}[1]`,value:b[1],valueSpec:e,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec}))}function d(f,v){const b=E(f.value),x=j(f.value),T=f.value!==null?f.value:v;if(!a)a=b;else if(b!==a)return[new y(f.key,T,`${b} stop domain type must match previous stop domain type ${a}`)];if(b!=="number"&&b!=="string"&&b!=="boolean")return[new y(f.key,T,"stop domain value must be a number, string, or boolean")];if(b!=="number"&&t!=="categorical"){let $=`number expected, ${b} found`;return wt(e)&&t===void 0&&($+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new y(f.key,T,$)]}return t==="categorical"&&b==="number"&&(!isFinite(x)||Math.floor(x)!==x)?[new y(f.key,T,`integer expected, found ${x}`)]:t!=="categorical"&&b==="number"&&o!==void 0&&x<o?[new y(f.key,T,"stop domain values must appear in ascending order")]:(o=x,t==="categorical"&&x in n?[new y(f.key,T,"stop domain values must be unique")]:(n[x]=!0,[]))}function m(f){return f.validateSpec({key:f.key,value:f.value,valueSpec:e,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec})}}function je(r){const e=(r.expressionContext==="property"?ws:Qa)(Me(r.value),r.valueSpec);if(e.result==="error")return e.value.map(a=>new y(`${r.key}${a.key}`,r.value,a.message));const t=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!t.outputDefined())return[new y(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ye(t))return[new y(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ye(t))return[new y(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Ut(t,["zoom","feature-state"]))return[new y(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!$t(t))return[new y(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(r){const e=r.value,t=r.key,a=E(e);return a!=="boolean"?[new y(t,e,`boolean expected, ${a} found`)]:[]}function Ls(r){const e=r.key,t=r.value,a=E(t);return a!=="string"?[new y(e,t,`color expected, ${a} found`)]:N.parse(String(t))?[]:[new y(e,t,`color expected, "${t}" found`)]}function Xe(r){const e=r.key,t=r.value,a=r.valueSpec,n=[];return Array.isArray(a.values)?a.values.indexOf(j(t))===-1&&n.push(new y(e,t,`expected one of [${a.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(a.values).indexOf(j(t))===-1&&n.push(new y(e,t,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(t)} found`)),n}function $r(r){return en(Me(r.value))?je(ft({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):an(r)}function an(r){const e=r.value,t=r.key;if(E(e)!=="array")return[new y(t,e,`array expected, ${E(e)} found`)];const a=r.styleSpec;let n,o=[];if(e.length<1)return[new y(t,e,"filter array must have at least 1 element")];switch(o=o.concat(Xe({key:`${t}[0]`,value:e[0],valueSpec:a.filter_operator,style:r.style,styleSpec:r.styleSpec})),j(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&j(e[1])==="$type"&&o.push(new y(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new y(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(n=E(e[1]),n!=="string"&&o.push(new y(`${t}[1]`,e[1],`string expected, ${n} found`)));for(let i=2;i<e.length;i++)n=E(e[i]),j(e[1])==="$type"?o=o.concat(Xe({key:`${t}[${i}]`,value:e[i],valueSpec:a.geometry_type,style:r.style,styleSpec:r.styleSpec})):n!=="string"&&n!=="number"&&n!=="boolean"&&o.push(new y(`${t}[${i}]`,e[i],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)o=o.concat(an({key:`${t}[${i}]`,value:e[i],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":n=E(e[1]),e.length!==2?o.push(new y(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):n!=="string"&&o.push(new y(`${t}[1]`,e[1],`string expected, ${n} found`));break}return o}function nn(r,e){const t=r.key,a=r.validateSpec,n=r.style,o=r.styleSpec,i=r.value,s=r.objectKey,l=o[`${e}_${r.layerType}`];if(!l)return[];const u=s.match(/^(.*)-transition$/);if(e==="paint"&&u&&l[u[1]]&&l[u[1]].transition)return a({key:t,value:i,valueSpec:o.transition,style:n,styleSpec:o});const c=r.valueSpec||l[s];if(!c)return[new y(t,i,`unknown property "${s}"`)];let p;if(E(i)==="string"&&wt(c)&&!c.tokens&&(p=/^{([^}]+)}$/.exec(i)))return[new y(t,i,`"${s}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(p[1])} }\`.`)];const h=[];return r.layerType==="symbol"&&(s==="text-field"&&n&&!n.glyphs&&h.push(new y(t,i,'use of "text-field" requires a style "glyphs" property')),s==="text-font"&&Rr(Me(i))&&j(i.type)==="identity"&&h.push(new y(t,i,'"text-font" does not support identity functions'))),h.concat(a({key:r.key,value:i,valueSpec:c,style:n,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:s}))}function on(r){return nn(r,"paint")}function sn(r){return nn(r,"layout")}function ln(r){let e=[];const t=r.value,a=r.key,n=r.style,o=r.styleSpec;!t.type&&!t.ref&&e.push(new y(a,t,'either "type" or "ref" is required'));let i=j(t.type);const s=j(t.ref);if(t.id){const l=j(t.id);for(let u=0;u<r.arrayIndex;u++){const c=n.layers[u];j(c.id)===l&&e.push(new y(a,t.id,`duplicate layer id "${t.id}", previously used at line ${c.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(u=>{u in t&&e.push(new y(a,t[u],`"${u}" is prohibited for ref layers`))});let l;n.layers.forEach(u=>{j(u.id)===s&&(l=u)}),l?l.ref?e.push(new y(a,t.ref,"ref cannot reference another ref layer")):i=j(l.type):e.push(new y(a,t.ref,`ref layer "${s}" not found`))}else if(i!=="background")if(!t.source)e.push(new y(a,t,'missing required property "source"'));else{const l=n.sources&&n.sources[t.source],u=l&&j(l.type);l?u==="vector"&&i==="raster"?e.push(new y(a,t.source,`layer "${t.id}" requires a raster source`)):u!=="raster-dem"&&i==="hillshade"?e.push(new y(a,t.source,`layer "${t.id}" requires a raster-dem source`)):u==="raster"&&i!=="raster"?e.push(new y(a,t.source,`layer "${t.id}" requires a vector source`)):u==="vector"&&!t["source-layer"]?e.push(new y(a,t,`layer "${t.id}" must specify a "source-layer"`)):u==="raster-dem"&&i!=="hillshade"?e.push(new y(a,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):i==="line"&&t.paint&&t.paint["line-gradient"]&&(u!=="geojson"||!l.lineMetrics)&&e.push(new y(a,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new y(a,t.source,`source "${t.source}" not found`))}return e=e.concat(Y({key:a,value:t,valueSpec:o.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*"(){return[]},type(){return r.validateSpec({key:`${a}.type`,value:t.type,valueSpec:o.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:t,objectKey:"type"})},filter:$r,layout(l){return Y({layer:t,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return sn(ft({layerType:i},u))}}})},paint(l){return Y({layer:t,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return on(ft({layerType:i},u))}}})}}})),e}function Ie(r){const e=r.value,t=r.key,a=E(e);return a!=="string"?[new y(t,e,`string expected, ${a} found`)]:[]}function _s(r){var e;const t=(e=r.sourceName)!==null&&e!==void 0?e:"",a=r.value,n=r.styleSpec,o=n.source_raster_dem,i=r.style;let s=[];const l=E(a);if(a===void 0)return s;if(l!=="object")return s.push(new y("source_raster_dem",a,`object expected, ${l} found`)),s;const u=j(a.encoding)==="custom",c=["redFactor","greenFactor","blueFactor","baseShift"],p=r.value.encoding?`"${r.value.encoding}"`:"Default";for(const h in a)!u&&c.includes(h)?s.push(new y(h,a[h],`In "${t}": "${h}" is only valid when "encoding" is set to "custom". ${p} encoding found`)):o[h]?s=s.concat(r.validateSpec({key:h,value:a[h],valueSpec:o[h],validateSpec:r.validateSpec,style:i,styleSpec:n})):s.push(new y(h,a[h],`unknown property "${h}"`));return s}const ha={promoteId:Cs};function un(r){const e=r.value,t=r.key,a=r.styleSpec,n=r.style,o=r.validateSpec;if(!e.type)return[new y(t,e,'"type" is required')];const i=j(e.type);let s;switch(i){case"vector":case"raster":return s=Y({key:t,value:e,valueSpec:a[`source_${i.replace("-","_")}`],style:r.style,styleSpec:a,objectElementValidators:ha,validateSpec:o}),s;case"raster-dem":return s=_s({sourceName:t,value:e,style:r.style,styleSpec:a,validateSpec:o}),s;case"geojson":if(s=Y({key:t,value:e,valueSpec:a.source_geojson,style:n,styleSpec:a,validateSpec:o,objectElementValidators:ha}),e.cluster)for(const l in e.clusterProperties){const[u,c]=e.clusterProperties[l],p=typeof u=="string"?[u,["accumulated"],["get",l]]:u;s.push(...je({key:`${t}.${l}.map`,value:c,expressionContext:"cluster-map"})),s.push(...je({key:`${t}.${l}.reduce`,value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return Y({key:t,value:e,valueSpec:a.source_video,style:n,validateSpec:o,styleSpec:a});case"image":return Y({key:t,value:e,valueSpec:a.source_image,style:n,validateSpec:o,styleSpec:a});case"canvas":return[new y(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xe({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Cs({key:r,value:e}){if(E(e)==="string")return Ie({key:r,value:e});{const t=[];for(const a in e)t.push(...Ie({key:`${r}.${a}`,value:e[a]}));return t}}function cn(r){const e=r.value,t=r.styleSpec,a=t.light,n=r.style;let o=[];const i=E(e);if(e===void 0)return o;if(i!=="object")return o=o.concat([new y("light",e,`object expected, ${i} found`)]),o;for(const s in e){const l=s.match(/^(.*)-transition$/);l&&a[l[1]]&&a[l[1]].transition?o=o.concat(r.validateSpec({key:s,value:e[s],valueSpec:t.transition,validateSpec:r.validateSpec,style:n,styleSpec:t})):a[s]?o=o.concat(r.validateSpec({key:s,value:e[s],valueSpec:a[s],validateSpec:r.validateSpec,style:n,styleSpec:t})):o=o.concat([new y(s,e[s],`unknown property "${s}"`)])}return o}function pn(r){const e=r.value,t=r.styleSpec,a=t.sky,n=r.style,o=E(e);if(e===void 0)return[];if(o!=="object")return[new y("sky",e,`object expected, ${o} found`)];let i=[];for(const s in e)a[s]?i=i.concat(r.validateSpec({key:s,value:e[s],valueSpec:a[s],style:n,styleSpec:t})):i=i.concat([new y(s,e[s],`unknown property "${s}"`)]);return i}function dn(r){const e=r.value,t=r.styleSpec,a=t.terrain,n=r.style;let o=[];const i=E(e);if(e===void 0)return o;if(i!=="object")return o=o.concat([new y("terrain",e,`object expected, ${i} found`)]),o;for(const s in e)a[s]?o=o.concat(r.validateSpec({key:s,value:e[s],valueSpec:a[s],validateSpec:r.validateSpec,style:n,styleSpec:t})):o=o.concat([new y(s,e[s],`unknown property "${s}"`)]);return o}function Ts(r){return Ie(r).length===0?[]:je(r)}function Ms(r){return Ie(r).length===0?[]:je(r)}function Is(r){const e=r.key,t=r.value;if(E(t)==="array"){if(t.length<1||t.length>4)return[new y(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const a={type:"number"};let n=[];for(let o=0;o<t.length;o++)n=n.concat(r.validateSpec({key:`${e}[${o}]`,value:t[o],validateSpec:r.validateSpec,valueSpec:a}));return n}else return Nr({key:e,value:t,valueSpec:{}})}function Es(r){const e=r.key,t=r.value,a=E(t),n=r.styleSpec;if(a!=="array"||t.length<1||t.length%2!==0)return[new y(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let i=0;i<t.length;i+=2)o=o.concat(Xe({key:`${e}[${i}]`,value:t[i],valueSpec:n.layout_symbol["text-anchor"]})),o=o.concat(Pr({key:`${e}[${i+1}]`,value:t[i+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:n}));return o}function fn(r){let e=[];const t=r.value,a=r.key;if(Array.isArray(t)){const n=[],o=[];for(const i in t){t[i].id&&n.includes(t[i].id)&&e.push(new y(a,t,`all the sprites' ids must be unique, but ${t[i].id} is duplicated`)),n.push(t[i].id),t[i].url&&o.includes(t[i].url)&&e.push(new y(a,t,`all the sprites' URLs must be unique, but ${t[i].url} is duplicated`)),o.push(t[i].url);const s={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Y({key:`${a}[${i}]`,value:t[i],valueSpec:s,validateSpec:r.validateSpec}))}return e}else return Ie({key:a,value:t})}function zs(r){const e=r.value,t=r.styleSpec,a=t.projection,n=r.style,o=E(e);if(e===void 0)return[];if(o!=="object")return[new y("projection",e,`object expected, ${o} found`)];let i=[];for(const s in e)a[s]?i=i.concat(r.validateSpec({key:s,value:e[s],valueSpec:a[s],style:n,styleSpec:t})):i=i.concat([new y(s,e[s],`unknown property "${s}"`)]);return i}function Rs(r){const e=r.key;let t=r.value;t=t instanceof String?t.valueOf():t;const a=E(t);return a==="array"&&!Ns(t)&&!Ps(t)?[new y(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(a)?[]:[new y(e,t,`projection expected, invalid type "${a}" found`)]}function Ps(r){return!!["interpolate","step","literal"].includes(r[0])}function Ns(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"}const ya={"*"(){return[]},array:Pr,boolean:As,number:Nr,color:Ls,constants:tn,enum:Xe,filter:$r,function:rn,layer:ln,object:Y,source:un,light:cn,sky:pn,terrain:dn,projection:zs,projectionDefinition:Rs,string:Ie,formatted:Ts,resolvedImage:Ms,padding:Is,variableAnchorOffsetCollection:Es,sprite:fn};function St(r){const e=r.value,t=r.valueSpec,a=r.styleSpec;return r.validateSpec=St,t.expression&&Rr(j(e))?rn(r):t.expression&&Xa(Me(e))?je(r):t.type&&ya[t.type]?ya[t.type](r):Y(ft({},r,{valueSpec:t.type?a[t.type]:t}))}function mn(r){const e=r.value,t=r.key,a=Ie(r);return a.length||(e.indexOf("{fontstack}")===-1&&a.push(new y(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&a.push(new y(t,e,'"glyphs" url must include a "{range}" token'))),a}function X(r,e=di){let t=[];return t=t.concat(St({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,validateSpec:St,objectElementValidators:{glyphs:mn,"*"(){return[]}}})),r.constants&&(t=t.concat(tn({key:"constants",value:r.constants}))),hn(t)}X.source=pe(ce(un));X.sprite=pe(ce(fn));X.glyphs=pe(ce(mn));X.light=pe(ce(cn));X.sky=pe(ce(pn));X.terrain=pe(ce(dn));X.layer=pe(ce(ln));X.filter=pe(ce($r));X.paintProperty=pe(ce(on));X.layoutProperty=pe(ce(sn));function ce(r){return function(e){return r({...e,validateSpec:St})}}function hn(r){return[].concat(r).sort((e,t)=>e.line-t.line)}function pe(r){return function(...e){return hn(r.apply(this,e))}}function ga(r){if(!r)return{style:Ve[He[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof r=="string"){const e=Us(r);return e.isValidStyle?{style:e.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:e.isValidJSON?{style:Ve[He[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:r.startsWith("http")?{style:r,requiresUrlMonitoring:!0,isFallback:!1}:r.toLowerCase().includes(".json")?{style:$s(r),requiresUrlMonitoring:!0,isFallback:!1}:{style:_a(r),requiresUrlMonitoring:!0,isFallback:!1}}return r instanceof Ca?{style:r.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:r instanceof Ta?{style:r.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:X(r).length===0?{style:r,requiresUrlMonitoring:!1,isFallback:!1}:{style:Ve[He[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function $s(r){try{return new URL(r).href}catch{}return new URL(r,location.origin).href}function Us(r){try{const e=JSON.parse(r),t=X(e);return{isValidJSON:!0,isValidStyle:t.length===0,styleObject:t.length===0?e:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}function fe(r,e,t){const a=window.document.createElement(r);return e!==void 0&&(a.className=e),t&&t.appendChild(a),a}function Ur(r){r.parentNode&&r.parentNode.removeChild(r)}class Ds{constructor(){A(this,"_map"),A(this,"_container"),A(this,"_terrainButton"),uo(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=fe("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=fe("button","maplibregl-ctrl-terrain",this._container),fe("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ur(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class js extends wo{constructor(e={}){super({showCompass:e.showCompass??!0,showZoom:e.showZoom??!0,visualizePitch:e.visualizePitch??!0}),A(this,"_rotateCompassArrow",()=>{const t=this._map.getBearing(),a=this._map.getPitch(),n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(a*(Math.PI/180))**.5)}) rotateX(${Math.min(70,a)}deg) rotateZ(${-t}deg)`:`rotate(${-t}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",t=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}))}_createButton(e,t){const a=super._createButton(e,t);return a.clickFunction=t,a}}const va=w.Marker,ba=w.LngLat,Os=w.LngLatBounds;class Fs extends So{constructor(){super(...arguments),A(this,"lastUpdatedCenter",new ba(0,0)),A(this,"_updateCamera",e=>{var t;const a=new ba(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,o={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},i=this._map.getZoom();i>(((t=this.options.fitBoundsOptions)==null?void 0:t.maxZoom)??30)&&(o.zoom=i),this._map.fitBounds(Os.fromLngLat(a,n),o,{geolocateSource:!0});let s=!1;const l=()=>{s=!0};this._map.once("click",l),this._map.once("dblclick",l),this._map.once("dragstart",l),this._map.once("mousedown",l),this._map.once("touchstart",l),this._map.once("wheel",l),this._map.once("moveend",()=>{this._map.off("click",l),this._map.off("dblclick",l),this._map.off("dragstart",l),this._map.off("mousedown",l),this._map.off("touchstart",l),this._map.off("wheel",l),!s&&(this.lastUpdatedCenter=this._map.getCenter())})}),A(this,"_finishSetupUI",e=>{if(this._map){if(e===!1){const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=fe("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new va({element:this._dotElement}),this._circleElement=fe("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new va({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",t=>{const a=t.originalEvent&&t.originalEvent.type==="resize",n=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!t.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!a&&n>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),A(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],t=this._map.project(e),a=this._map.unproject([t.x,t.y]),n=this._map.unproject([t.x+20,t.y]),o=a.distanceTo(n)/20,i=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var K,ne,we,Se,Z,pt,H,yn,J,gn;class Zt{constructor(e,t){be(this,H),be(this,K),A(this,"map"),be(this,ne),be(this,we),be(this,Se),be(this,Z,!1),be(this,pt),e.style!==void 0&&ze(this,Z,!0),ze(this,K,{zoomAdjust:-4,position:"top-right",...t,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...e,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...e.containerStyle??{}}}),e.lockZoom!==void 0&&(M(this,K).minZoom=e.lockZoom,M(this,K).maxZoom=e.lockZoom)}setStyle(e,t){M(this,Z)||this.map.setStyle(e,t),G(this,H,J).call(this)}addLayer(e,t){return M(this,Z)||this.map.addLayer(e,t),G(this,H,J).call(this),this.map}moveLayer(e,t){return M(this,Z)||this.map.moveLayer(e,t),G(this,H,J).call(this),this.map}removeLayer(e){return M(this,Z)||this.map.removeLayer(e),G(this,H,J).call(this),this}setLayerZoomRange(e,t,a){return M(this,Z)||this.map.setLayerZoomRange(e,t,a),G(this,H,J).call(this),this}setFilter(e,t,a){return M(this,Z)||this.map.setFilter(e,t,a),G(this,H,J).call(this),this}setPaintProperty(e,t,a,n){return M(this,Z)||this.map.setPaintProperty(e,t,a,n),G(this,H,J).call(this),this}setLayoutProperty(e,t,a,n){return M(this,Z)||this.map.setLayoutProperty(e,t,a,n),G(this,H,J).call(this),this}setGlyphs(e,t){return M(this,Z)||this.map.setGlyphs(e,t),G(this,H,J).call(this),this}onAdd(e){ze(this,ne,e),ze(this,we,fe("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[t,a]of Object.entries(M(this,K).containerStyle))M(this,we).style.setProperty(t,a);return M(this,K).container=M(this,we),M(this,K).zoom=e.getZoom()+M(this,K).zoomAdjust,this.map=new Dt(M(this,K)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{G(this,H,yn).call(this,M(this,K).parentRect),ze(this,pt,G(this,H,gn).call(this))}),M(this,we)}onRemove(){var e;(e=M(this,pt))==null||e.call(this),Ur(M(this,we))}}K=new WeakMap,ne=new WeakMap,we=new WeakMap,Se=new WeakMap,Z=new WeakMap,pt=new WeakMap,H=new WeakSet,yn=function(r){r===void 0||r.linePaint===void 0&&r.fillPaint===void 0||(ze(this,Se,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:M(this,Se)}),(r.lineLayout!==void 0||r.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...r.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...r.linePaint}}),r.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...r.fillPaint}}),G(this,H,J).call(this))},J=function(){if(M(this,Se)===void 0)return;const{devicePixelRatio:r}=window,e=M(this,ne).getCanvas(),t=e.width/r,a=e.height/r,n=M(this,ne).unproject.bind(M(this,ne)),o=n([0,0]),i=n([t,0]),s=n([0,a]),l=n([t,a]);M(this,Se).geometry.coordinates=[[s.toArray(),l.toArray(),i.toArray(),o.toArray(),s.toArray()]];const u=this.map.getSource("parentRect");u!==void 0&&u.setData(M(this,Se))},gn=function(){const{pitchAdjust:r}=M(this,K),e=()=>{o("parent")},t=()=>{o("minimap")},a=()=>{M(this,ne).on("move",e),this.map.on("move",t)},n=()=>{M(this,ne).off("move",e),this.map.off("move",t)},o=i=>{n();const s=i==="parent"?M(this,ne):this.map,l=i==="parent"?this.map:M(this,ne),u=s.getCenter(),c=s.getZoom()+M(this,K).zoomAdjust*(i==="parent"?1:-1),p=s.getBearing(),h=s.getPitch();l.jumpTo({center:u,zoom:c,bearing:p,pitch:r?h:0}),G(this,H,J).call(this),a()};return a(),()=>{n()}};class qs{constructor(){A(this,"map"),A(this,"container"),A(this,"projectionButton")}onAdd(e){return this.map=e,this.container=fe("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=fe("button","maplibregl-ctrl-projection",this.container),fe("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),e.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){Ur(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){this.map.getProjection()===void 0&&this.map.setProjection({type:"mercator"}),this.map.isGlobeProjection()?this.map.enableMercatorProjection():this.map.enableGlobeProjection(),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}const Bs="3.2.2",Hs={version:Bs};class Vs{constructor(e,t=2e3){A(this,"map"),A(this,"registeredModules",new Set),this.map=e,setTimeout(async()=>{if(!D.telemetry)return;const a=this.preparePayload();try{(await fetch(a,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(n){console.warn("The metrics could not be sent to MapTiler Cloud",n)}},Math.max(1e3,t))}registerModule(e,t){this.registeredModules.add(`${e}:${t}`)}preparePayload(){const e=new URL(V.telemetryURL);return e.searchParams.append("sdk",Hs.version),e.searchParams.append("key",D.apiKey),e.searchParams.append("mtsid",hr),e.searchParams.append("session",D.session?"1":"0"),e.searchParams.append("caching",D.caching?"1":"0"),e.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),e.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),e.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),this.registeredModules.size>0&&e.searchParams.append("modules",Array.from(this.registeredModules).join("|")),e.href}}const Gs={POINT:"POINT",COUNTRY:"COUNTRY"};class Dt extends w.Map{constructor(e){fo(e.container),e.apiKey&&(D.apiKey=e.apiKey);const{style:t,requiresUrlMonitoring:a,isFallback:n}=ga(e.style);n&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),D.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const o=location.hash;let i={compact:!1};e.customAttribution?i.customAttribution=e.customAttribution:e.attributionControl&&typeof e.attributionControl=="object"&&(i={...i,...e.attributionControl});const s={...e,style:t,maplibreLogo:!1,transformRequest:Wr(e.transformRequest),attributionControl:e.forceNoAttributionControl===!0?!1:i};delete s.style,super(s),A(this,"options"),A(this,"telemetry"),A(this,"isTerrainEnabled",!1),A(this,"terrainExaggeration",1),A(this,"primaryLanguage"),A(this,"terrainGrowing",!1),A(this,"terrainFlattening",!1),A(this,"minimap"),A(this,"forceLanguageUpdate"),A(this,"languageAlwaysBeenStyle"),A(this,"isReady",!1),A(this,"terrainAnimationDuration",1e3),A(this,"monitoredStyleUrls"),A(this,"styleInProcess",!1),A(this,"curentProjection"),A(this,"originalLabelStyle",new window.Map),A(this,"isStyleLocalized",!1),A(this,"languageIsUpdated",!1),this.options=e,this.setStyle(t),a&&this.monitorStyleUrl(t);const l=()=>{let d="The distant style could not be loaded.";this.getStyle()?d+="Leaving the style as is.":(this.setStyle(Ve.STREETS),d+=`Loading default MapTiler Cloud style "${Ve.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(d)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",d=>{if(d.error instanceof w.AJAXError){const m=d.error.url,f=new URL(m);f.search="";const v=f.href;this.monitoredStyleUrls&&this.monitoredStyleUrls.has(v)&&(this.monitoredStyleUrls.delete(v),l());return}if(this.styleInProcess){l();return}}),D.caching&&!er&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),D.caching&&er&&so(),typeof e.language>"u")this.primaryLanguage=D.primaryLanguage;else{const d=Fr(e.language,I);this.primaryLanguage=d??D.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===I.STYLE||this.primaryLanguage===I.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===I.STYLE,this.terrainExaggeration=e.terrainExaggeration??this.terrainExaggeration,this.curentProjection=e.projection,this.on("styledata",()=>{this.curentProjection==="mercator"?this.setProjection({type:"mercator"}):this.curentProjection==="globe"&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!e.geolocate||e.center||e.hash&&o)return;try{if(e.geolocate===Gs.COUNTRY){await this.fitToIpBounds();return}}catch(m){console.warn(m.message)}let d;try{await this.centerOnIpPoint(e.zoom),d=this.getCameraHash()}catch(m){console.warn(m.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(m=>{d===this.getCameraHash()&&(this.terrain?this.easeTo({center:[m.coords.longitude,m.coords.latitude],zoom:e.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[m.coords.longitude,m.coords.latitude],zoom:e.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let d={logo:null};try{const m=Object.keys(this.style.sourceCaches).map(v=>this.getSource(v)).filter(v=>v&&"url"in v&&typeof v.url=="string"&&v.url.includes("tiles.json")),f=new URL(m[0].url);f.searchParams.has("key")||f.searchParams.append("key",D.apiKey),d=await(await fetch(f.href)).json()}catch{}if(e.forceNoAttributionControl!==!0)if("logo"in d&&d.logo){const m=d.logo;this.addControl(new Jr({logoURL:m}),e.logoPosition)}else e.maptilerLogo&&this.addControl(new Jr,e.logoPosition);if(e.scaleControl){const m=e.scaleControl===!0||e.scaleControl===void 0?"bottom-right":e.scaleControl,f=new Ao({unit:D.unit});this.addControl(f,m),D.on("unit",v=>{f.setUnit(v)})}if(e.navigationControl!==!1){const m=e.navigationControl===!0||e.navigationControl===void 0?"top-right":e.navigationControl;this.addControl(new js,m)}if(e.geolocateControl!==!1){const m=e.geolocateControl===!0||e.geolocateControl===void 0?"top-right":e.geolocateControl;this.addControl(new Fs({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),m)}if(e.terrainControl){const m=e.terrainControl===!0||e.terrainControl===void 0?"top-right":e.terrainControl;this.addControl(new Ds,m)}if(e.projectionControl){const m=e.projectionControl===!0||e.projectionControl===void 0?"top-right":e.projectionControl;this.addControl(new qs,m)}if(e.fullscreenControl){const m=e.fullscreenControl===!0||e.fullscreenControl===void 0?"top-right":e.fullscreenControl;this.addControl(new Lo({}),m)}this.isReady=!0,this.fire("ready",{target:this})});let u=!1,c=!1,p;this.once("ready",()=>{u=!0,c&&this.fire("loadWithTerrain",p)}),this.once("style.load",()=>{const{minimap:d}=e;if(typeof d=="object"){const{zoom:m,center:f,style:v,language:b,apiKey:x,maptilerLogo:T,canvasContextAttributes:$,refreshExpiredTiles:P,maxBounds:ae,scrollZoom:ve,minZoom:qe,maxZoom:nt,boxZoom:ot,locale:En,fadeDuration:zn,crossSourceCollisions:Rn,clickTolerance:Pn,bounds:Nn,fitBoundsOptions:$n,pixelRatio:Un,validateStyle:Dn}=e;this.minimap=new Zt(d,{zoom:m,center:f,style:v,language:b,apiKey:x,container:"null",maptilerLogo:T,canvasContextAttributes:$,refreshExpiredTiles:P,maxBounds:ae,scrollZoom:ve,minZoom:qe,maxZoom:nt,boxZoom:ot,locale:En,fadeDuration:zn,crossSourceCollisions:Rn,clickTolerance:Pn,bounds:Nn,fitBoundsOptions:$n,pixelRatio:Un,validateStyle:Dn}),this.addControl(this.minimap,d.position??"bottom-left")}else d===!0?(this.minimap=new Zt({},e),this.addControl(this.minimap,"bottom-left")):d!==void 0&&d!==!1&&(this.minimap=new Zt({},e),this.addControl(this.minimap,d))});const h=d=>{d.terrain&&(c=!0,p={type:"loadWithTerrain",target:this,terrain:d.terrain},this.off("terrain",h),u&&this.fire("loadWithTerrain",p))};this.on("terrain",h),e.terrain&&this.enableTerrain(e.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",d=>{if(this._removed===!0){console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.");return}console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",d)})}),this.telemetry=new Vs(this)}recreate(){const e={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new Dt({...this.options})),this.once("load",()=>{this.jumpTo(e)})}setTerrainAnimationDuration(e){this.terrainAnimationDuration=Math.max(e,0)}async onLoadAsync(){return new Promise(e=>{if(this.loaded()){e(this);return}this.once("load",()=>{e(this)})})}async onReadyAsync(){return new Promise(e=>{if(this.isReady){e(this);return}this.once("ready",()=>{e(this)})})}async onLoadWithTerrainAsync(){return new Promise(e=>{if(this.isReady&&this.terrain){e(this);return}this.once("loadWithTerrain",()=>{e(this)})})}monitorStyleUrl(e){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const t=new URL(e);t.search="",this.monitoredStyleUrls.add(t.href)}setStyle(e,t){var a;this.originalLabelStyle.clear(),(a=this.minimap)==null||a.setStyle(e),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const n=ga(e);if(n.requiresUrlMonitoring&&this.monitorStyleUrl(n.style),n.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(n.style,t),this}addLayer(e,t){var a;return(a=this.minimap)==null||a.addLayer(e,t),super.addLayer(e,t)}moveLayer(e,t){var a;return(a=this.minimap)==null||a.moveLayer(e,t),super.moveLayer(e,t)}removeLayer(e){var t;return(t=this.minimap)==null||t.removeLayer(e),super.removeLayer(e)}setLayerZoomRange(e,t,a){var n;return(n=this.minimap)==null||n.setLayerZoomRange(e,t,a),super.setLayerZoomRange(e,t,a)}setFilter(e,t,a){var n;return(n=this.minimap)==null||n.setFilter(e,t,a),super.setFilter(e,t,a)}setPaintProperty(e,t,a,n){var o;return(o=this.minimap)==null||o.setPaintProperty(e,t,a,n),super.setPaintProperty(e,t,a,n)}setLayoutProperty(e,t,a,n){var o;return(o=this.minimap)==null||o.setLayoutProperty(e,t,a,n),super.setLayoutProperty(e,t,a,n)}setGlyphs(e,t){var a;return(a=this.minimap)==null||a.setGlyphs(e,t),super.setGlyphs(e,t)}getStyleLanguage(){return!this.style||!this.style.stylesheet||!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?Yt(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(e){var t;(t=this.minimap)==null||t.map.setLanguage(e),this.onStyleReady(()=>{this.setPrimaryLanguage(e)})}setPrimaryLanguage(e){const t=this.getStyleLanguage(),a=Fr(e,I);if(!a){console.warn(`The language "${a}" is not supported.`);return}if(!(a.flag===I.STYLE.flag&&t&&(t.flag===I.AUTO.flag||t.flag===I.VISITOR.flag))&&(a.flag!==I.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===a&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===I.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=a;let n=a;if(a.flag===I.STYLE.flag){if(!t){console.warn("The style has no default languages or has an invalid one.");return}n=t}let o=I.LOCAL.flag,i=["get",o];n.flag===I.VISITOR.flag?(o=Hr().flag,i=["case",["all",["has",o],["has",I.LOCAL.flag]],["case",["==",["get",o],["get",I.LOCAL.flag]],["get",I.LOCAL.flag],["format",["get",o],{"font-scale":.8},`
`,["get",I.LOCAL.flag],{"font-scale":1.1}]],["get",I.LOCAL.flag]]):n.flag===I.VISITOR_ENGLISH.flag?(o=I.ENGLISH.flag,i=["case",["all",["has",o],["has",I.LOCAL.flag]],["case",["==",["get",o],["get",I.LOCAL.flag]],["get",I.LOCAL.flag],["format",["get",o],{"font-scale":.8},`
`,["get",I.LOCAL.flag],{"font-scale":1.1}]],["get",I.LOCAL.flag]]):n.flag===I.AUTO.flag?(o=Hr().flag,i=["coalesce",["get",o],["get",I.LOCAL.flag]]):n===I.LOCAL?(o=I.LOCAL.flag,i=["get",o]):(o=n.flag,i=["coalesce",["get",o],["get",I.LOCAL.flag]]);const{layers:s}=this.getStyle(),l=this.originalLabelStyle.size===0;if(l){const u=xo(s,this);this.isStyleLocalized=Object.keys(u.localized).length>0}for(const u of s){if(u.type!=="symbol")continue;const c=u,p=this.getSource(c.source);if(!p||!("url"in p&&typeof p.url=="string")||new URL(p.url).host!==V.maptilerApiHost)continue;const{id:h,layout:d}=c;if(!d||!("text-field"in d))continue;let m;if(l?(m=this.getLayoutProperty(h,"text-field"),this.originalLabelStyle.set(h,m)):m=this.originalLabelStyle.get(h),typeof m=="string"){const{contains:f,exactMatch:v}=ho(m,this.isStyleLocalized);if(!f)continue;if(v)this.setLayoutProperty(h,"text-field",i);else{const b=yo(m,i,this.isStyleLocalized);this.setLayoutProperty(h,"text-field",b)}}else{const f=mo(m,i,this.isStyleLocalized);this.setLayoutProperty(h,"text-field",f)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(e){if(!this.terrain)return;const t=performance.now(),a=this.terrain.exaggeration,n=e-a,o=()=>{if(!this.terrain||this.terrainFlattening)return;const i=(performance.now()-t)/this.terrainAnimationDuration;if(i<.99){const s=1-(1-i)**4,l=a+s*n;this.terrain.exaggeration=l,requestAnimationFrame(o)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=e,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(o)}enableTerrain(e=this.terrainExaggeration){if(e<0){console.warn("Terrain exaggeration cannot be negative.");return}const t=n=>{!this.terrain||n.type!=="data"||n.dataType!=="source"||!("source"in n)||n.sourceId!=="maptiler-terrain"||n.source.type!=="raster-dem"||n.isSourceLoaded&&(this.off("data",t),this.growTerrain(e))},a=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=e,this.on("data",t),this.addSource(V.terrainSourceId,{type:"raster-dem",url:V.terrainSourceURL}),this.setTerrain({source:V.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(e);return}this.loaded()||this.isTerrainEnabled?a():this.once("load",()=>{this.getTerrain()&&this.getSource(V.terrainSourceId)||a()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const e=performance.now(),t=this.terrain.exaggeration,a=()=>{if(!this.terrain||this.terrainGrowing)return;const n=(performance.now()-e)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,n<.99){const o=(1-n)**4,i=t*o;this.terrain.exaggeration=i,requestAnimationFrame(a)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(V.terrainSourceId)&&this.removeSource(V.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(a)}setTerrainExaggeration(e,t=!0){!t&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}onStyleReady(e){this.isStyleLoaded()?e():this.once("styledata",()=>{e()})}async fitToIpBounds(){const e=await Br.info();this.fitBounds(e.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(e){const t=await Br.info();this.jumpTo({center:[t.longitude??0,t.latitude??0],zoom:e||11})}getCameraHash(){const e=new Float32Array(5),t=this.getCenter();return e[0]=t.lng,e[1]=t.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),On.fromUint8Array(new Uint8Array(e.buffer))}getSdkConfig(){return D}getMaptilerSessionId(){return hr}setTransformRequest(e){return super.setTransformRequest(Wr(e)),this}isGlobeProjection(){const e=this.getProjection();return e?e.type==="globe":!1}enableGlobeProjection(){this.isGlobeProjection()!==!0&&(this.setProjection({type:"globe"}),this.curentProjection="globe")}enableMercatorProjection(){this.isGlobeProjection()!==!1&&(this.setProjection({type:"mercator"}),this.curentProjection="mercator")}isLanguageUpdated(){return this.languageIsUpdated}}function Dr(r){if(typeof DOMParser<"u"){const e=new DOMParser().parseFromString(r,"application/xml");if(e.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return e}throw new Error("No XML parser found")}function vn(r,e){if(!r.hasChildNodes())return!1;for(const t of Array.from(r.childNodes)){const a=t.nodeName;if(typeof a=="string"&&a.trim().toLowerCase()===e.toLowerCase())return!0}return!1}function xa(r){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(r);throw new Error("No XML serializer found")}function bn(r){const e=typeof r=="string"?Dr(r):r;if(!vn(e,"gpx"))throw new Error("The XML document is not valid GPX");const t=B(e,"trk"),a=B(e,"rte"),n=B(e,"wpt"),o={type:"FeatureCollection",features:[]};for(const i of Array.from(t)){const s=Js(i);s&&o.features.push(s)}for(const i of Array.from(a)){const s=Ys(i);s&&o.features.push(s)}for(const i of Array.from(n))o.features.push(Xs(i));return o}function xn(r,e){let t=r;if(typeof t=="string"&&(t=Dr(t)),!vn(t,"kml"))throw new Error("The XML document is not valid KML");const a={type:"FeatureCollection",features:[]},n={},o={},i={},s=B(t,"Placemark"),l=B(t,"Style"),u=B(t,"StyleMap");for(const c of Array.from(l)){const p=Sa(xa(c)).toString(16);n[`#${Te(c,"id")}`]=p,o[p]=c}for(const c of Array.from(u)){n[`#${Te(c,"id")}`]=Sa(xa(c)).toString(16);const p=B(c,"Pair"),h={};for(const d of Array.from(p))h[R(k(d,"key"))??""]=R(k(d,"styleUrl"));i[`#${Te(c,"id")}`]=h}for(const c of Array.from(s))a.features=a.features.concat(Zs(c,n,o,i));return a}function wa(r){if(r===null)return["#000000",1];let e="",t=1,a=r;return a.startsWith("#")&&(a=a.substring(1)),(a.length===6||a.length===3)&&(e=a),a.length===8&&(t=Number.parseInt(a.substring(0,2),16)/255,e=`#${a.substring(6,8)}${a.substring(4,6)}${a.substring(2,4)}`),[e??"#000000",t??1]}function Ks(r){return kn(r.split(" "))}function Ws(r){let e=B(r,"coord");const t=[],a=[];e.length===0&&(e=B(r,"gx:coord"));for(const o of Array.from(e))t.push(Ks(R(o)??""));const n=B(r,"when");for(const o of Array.from(n))a.push(R(o));return{coords:t,times:a}}function dt(r){const e=["Polygon","LineString","Point","Track","gx:Track"];let t,a,n,o,i;const s=[],l=[];if(k(r,"MultiGeometry")!==null)return dt(k(r,"MultiGeometry"));if(k(r,"MultiTrack")!==null)return dt(k(r,"MultiTrack"));if(k(r,"gx:MultiTrack")!==null)return dt(k(r,"gx:MultiTrack"));for(n=0;n<e.length;n++)if(a=B(r,e[n]),a){for(o=0;o<a.length;o++)if(t=a[o],e[n]==="Point")s.push({type:"Point",coordinates:An(R(k(t,"coordinates"))??"")});else if(e[n]==="LineString")s.push({type:"LineString",coordinates:Aa(R(k(t,"coordinates"))??"")});else if(e[n]==="Polygon"){const u=B(t,"LinearRing"),c=[];for(i=0;i<u.length;i++)c.push(Aa(R(k(u[i],"coordinates"))??""));s.push({type:"Polygon",coordinates:c})}else if(e[n]==="Track"||e[n]==="gx:Track"){const u=Ws(t);s.push({type:"LineString",coordinates:u.coords}),u.times.length&&l.push(u.times)}}return{geoms:s,coordTimes:l}}function Zs(r,e,t,a){const n=dt(r),o={},i=R(k(r,"name")),s=R(k(r,"address")),l=R(k(r,"description")),u=k(r,"TimeSpan"),c=k(r,"TimeStamp"),p=k(r,"ExtendedData"),h=k(r,"visibility");let d,m=R(k(r,"styleUrl")),f=k(r,"LineStyle"),v=k(r,"PolyStyle");if(!n.geoms.length)return[];if(i&&(o.name=i),s&&(o.address=s),m){m.startsWith("#")||(m=`#${m}`),o.styleUrl=m,e[m]&&(o.styleHash=e[m]),a[m]&&(o.styleMapHash=a[m],o.styleHash=e[a[m].normal??""]);const x=t[o.styleHash??""];if(x){f||(f=k(x,"LineStyle")),v||(v=k(x,"PolyStyle"));const T=k(x,"IconStyle");if(T){const $=k(T,"Icon");if($){const P=R(k($,"href"));P&&(o.icon=P)}}}}if(l&&(o.description=l),u){const x=R(k(u,"begin")),T=R(k(u,"end"));x&&T&&(o.timespan={begin:x,end:T})}if(c!==null&&(o.timestamp=R(k(c,"when"))??new Date().toISOString()),f!==null){const x=wa(R(k(f,"color"))),T=x[0],$=x[1],P=Number.parseFloat(R(k(f,"width"))??"");T&&(o.stroke=T),Number.isNaN($)||(o["stroke-opacity"]=$),Number.isNaN(P)||(o["stroke-width"]=P)}if(v){const x=wa(R(k(v,"color"))),T=x[0],$=x[1],P=R(k(v,"fill")),ae=R(k(v,"outline"));T&&(o.fill=T),Number.isNaN($)||(o["fill-opacity"]=$),P&&(o["fill-opacity"]=P==="1"?o["fill-opacity"]||1:0),ae&&(o["stroke-opacity"]=ae==="1"?o["stroke-opacity"]||1:0)}if(p){const x=B(p,"Data"),T=B(p,"SimpleData");for(d=0;d<x.length;d++)o[x[d].getAttribute("name")??""]=R(k(x[d],"value"))??"";for(d=0;d<T.length;d++)o[T[d].getAttribute("name")??""]=R(T[d])??""}h!==null&&(o.visibility=R(h)??""),n.coordTimes.length!==0&&(o.coordTimes=n.coordTimes.length===1?n.coordTimes[0]:n.coordTimes);const b={type:"Feature",geometry:n.geoms.length===1?n.geoms[0]:{type:"GeometryCollection",geometries:n.geoms},properties:o};return Te(r,"id")&&(b.id=Te(r,"id")??void 0),[b]}function wn(r,e){const t=B(r,e),a=[],n=[];let o=[];const i=t.length;if(!(i<2)){for(let s=0;s<i;s++){const l=Ln(t[s]);a.push(l.coordinates),l.time&&n.push(l.time),(l.heartRate||o.length)&&(o.length===0&&(o=new Array(s).fill(null)),o.push(l.heartRate))}return{line:a,times:n,heartRates:o}}}function Js(r){const e=B(r,"trkseg"),t=[],a=[],n=[];let o;for(let s=0;s<e.length;s++)if(o=wn(e[s],"trkpt"),o!==void 0&&(o.line&&t.push(o.line),o.times&&o.times.length&&a.push(o.times),n.length||o.heartRates&&o.heartRates.length)){if(!n.length)for(let l=0;l<s;l++)n.push(new Array(t[l].length).fill(null));o.heartRates&&o.heartRates.length?n.push(o.heartRates):n.push(new Array(o.line.length).fill(null))}if(t.length===0)return;const i={...jr(r),...Sn(k(r,"extensions"))};return a.length!==0&&(i.coordTimes=t.length===1?a[0]:a),n.length!==0&&(i.heartRates=t.length===1?n[0]:n),t.length===1?{type:"Feature",properties:i,geometry:{type:"LineString",coordinates:t[0]}}:{type:"Feature",properties:i,geometry:{type:"MultiLineString",coordinates:t}}}function Ys(r){const e=wn(r,"rtept");return e===void 0?void 0:{type:"Feature",properties:{...jr(r),...Sn(k(r,"extensions"))},geometry:{type:"LineString",coordinates:e.line}}}function Xs(r){return{type:"Feature",properties:{...jr(r),...lr(r,["sym"])},geometry:{type:"Point",coordinates:Ln(r).coordinates}}}function Sn(r){const e={};if(r){const t=k(r,"line");if(t){const a=R(k(t,"color")),n=Number.parseFloat(R(k(t,"opacity"))??"0"),o=Number.parseFloat(R(k(t,"width"))??"0");a&&(e.stroke=a),Number.isNaN(n)||(e["stroke-opacity"]=n),Number.isNaN(o)||(e["stroke-width"]=o*96/25.4)}}return e}function jr(r){const e=lr(r,["name","cmt","desc","type","time","keywords"]),t=B(r,"link");if(t.length!==0){e.links=[];for(const a of Array.from(t)){const n={href:Te(a,"href"),...lr(a,["text","type"])};e.links.push(n)}}return e}function Sa(r){let e=0;if(!r||!r.length)return e;for(let t=0;t<r.length;t++)e=(e<<5)-e+r.charCodeAt(t)|0;return e}function B(r,e){return r.getElementsByTagName(e)}function Te(r,e){return r.getAttribute(e)}function ka(r,e){return Number.parseFloat(Te(r,e)??"0")}function k(r,e){const t=B(r,e);return t.length?t[0]:null}function Qs(r){return r.normalize&&r.normalize(),r}function kn(r){return r.map(Number.parseFloat).map(e=>Number.isNaN(e)?null:e)}function R(r){return r&&Qs(r),r&&r.textContent}function lr(r,e){const t={};let a,n;for(n=0;n<e.length;n++)a=k(r,e[n]),a&&(t[e[n]]=R(a)??"");return t}function An(r){return kn(r.replace(/\s*/g,"").split(","))}function Aa(r){const e=r.replace(/^\s*|\s*$/g,"").split(/\s+/),t=[];for(const a of e)t.push(An(a));return t}function Ln(r){const e=[ka(r,"lon"),ka(r,"lat")],t=k(r,"ele"),a=k(r,"gpxtpx:hr")||k(r,"hr"),n=k(r,"time");let o;return t&&(o=Number.parseFloat(R(t)??"0"),Number.isNaN(o)||e.push(o)),{coordinates:e,time:n?R(n):null,heartRate:a!==null?Number.parseFloat(R(a)??"0"):null}}function el(r){let e=r;try{typeof e=="string"&&(e=Dr(e))}catch{return null}try{return bn(e)}catch{}try{return xn(e)}catch{}return null}async function tl(r,e={}){const t=e.download??!1,a=await rl(r);if(t){const n=e.filename??"maptiler_screenshot.png",o=document.createElement("a");o.style.display="none",document.body.appendChild(o),o.href=URL.createObjectURL(a),o.download=n,o.click(),setTimeout(()=>{document.body.removeChild(o),URL.revokeObjectURL(o.href)},0)}return a}function rl(r){return new Promise((e,t)=>{r.redraw(),r.once("idle",()=>{r.getCanvas().toBlob(a=>{if(!a){t(Error("Screenshot could not be created."));return}e(a)},"image/png")})})}const ur=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function jt(){return ur[~~(Math.random()*ur.length)][~~(Math.random()*4)]}function rt(){return`maptiler_source_${Ea()}`}function at(){return`maptiler_layer_${Ea()}`}function cr(r,e){if(e<=r[0].zoom)return r[0].value;if(e>=r[r.length-1].zoom)return r[r.length-1].value;for(let t=0;t<r.length-1;t+=1)if(e>=r[t].zoom&&e<r[t+1].zoom){const a=r[t+1].zoom-r[t].zoom,n=(e-r[t].zoom)/a;return n*r[t+1].value+(1-n)*r[t].value}return 0}function ye(r){return["interpolate",["linear"],["zoom"],...r.flatMap(e=>[e.zoom,e.value])]}function z(r){return["interpolate",["linear"],["zoom"],...r.flatMap(e=>[e.zoom,e.value])]}function _n(r,e){if(typeof e=="number"&&typeof r=="number")return 2*e+r;if(typeof e=="number"&&Array.isArray(r))return["interpolate",["linear"],["zoom"],...r.flatMap(t=>[t.zoom,2*e+t.value])];if(typeof r=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.flatMap(t=>[t.zoom,2*t.value+r])];if(Array.isArray(r)&&Array.isArray(e)){const t=Array.from(new Set([...r.map(a=>a.zoom),...e.map(a=>a.zoom)])).sort((a,n)=>a<n?-1:1);return["interpolate",["linear"],["zoom"],...t.flatMap(a=>[a,2*cr(e,a)+cr(r,a)])]}return 0}function Cn(r,e){return["interpolate",["linear"],["get",e],...r.flatMap(t=>[t.propertyValue,t.value])]}function Or(r){const e=r.trimStart(),t=`${e}${" ".repeat(r.length-e.length)}`,a=Array.from(t);if(!a.every(o=>o===" "||o==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(a.some(o=>o==="_")&&a.some(o=>o===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const n=[1];for(let o=1;o<a.length;o+=1){const i=a[o-1],s=a[o];i===s?n[n.length-1]+=1:n.push(1)}return n}function pr(r,e){return["interpolate",["linear"],["get",e],...r.flatMap(t=>[t.value,t.color])]}function dr(r,e,t=!0){return t?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius*.025])],2,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius*.05])],4,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius*.1])],8,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius*.25])],16,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius])]]:["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.value,a.pointRadius])]}function Tn(r,e,t=!0){return t?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value*.025])],2,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value*.05])],4,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value*.1])],8,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value*.25])],16,["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value])]]:["interpolate",["linear"],["get",e],...r.flatMap(a=>[a.propertyValue,a.value])]}function fr(r,e){return r.every(t=>t.color[3]===r[0].color[3])?r[0].color[3]?r[0].color[3]/255:1:["interpolate",["linear"],["get",e],...r.getRawColorStops().flatMap(t=>{const a=t.value,n=t.color;return[a,n.length===4?n[3]/255:1]})]}function Mn(r,e=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:e+1},(t,a)=>{const n=a/e;return[n,r.getColorHex(n)]}).flat()]}function ut(r){const e=r.toString(16);return e.length===1?`0${e}`:e}function al(r){return`#${ut(r[0])}${ut(r[1])}${ut(r[2])}${r.length===4?ut(r[3]):""}`}class S extends Array{constructor(e={}){super(),A(this,"min",0),A(this,"max",1),"min"in e&&(this.min=e.min),"max"in e&&(this.max=e.max),"stops"in e&&this.setStops(e.stops,{clone:!1})}static fromArrayDefinition(e){return new S({stops:e.map(t=>({value:t[0],color:t[1]}))})}setStops(e,t={clone:!0}){const a=t.clone?this.clone():this;a.length=0;let n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let i=0;i<e.length;i+=1)n=Math.min(n,e[i].value),o=Math.max(o,e[i].value),a.push({value:e[i].value,color:e[i].color.slice()});return a.sort((i,s)=>i.value<s.value?-1:1),this.min=n,this.max=o,a}scale(e,t,a={clone:!0}){const n=a.clone,o=this[0].value,i=this.at(-1).value-o,s=t-e,l=[];for(let u=0;u<this.length;u+=1){const c=(this[u].value-o)/i*s+e;n?l.push({value:c,color:this[u].color.slice()}):this[u].value=c}return n?new S({stops:l}):this}at(e){return e<0?this[this.length+e]:this[e]}clone(){return new S({stops:this.getRawColorStops()})}getRawColorStops(){const e=[];for(let t=0;t<this.length;t+=1)e.push({value:this[t].value,color:this[t].color});return e}reverse(e={clone:!0}){const t=e.clone?this.clone():this;for(let a=0;a<~~(t.length/2);a+=1){const n=t[a].color;t[a].color=t.at(-(a+1)).color,t.at(-(a+1)).color=n}return t}getBounds(){return{min:this.min,max:this.max}}getColor(e,t={smooth:!0}){if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(let a=0;a<this.length-1;a+=1){if(e>this[a+1].value)continue;const n=this[a].color;if(!t.smooth)return n.slice();const o=this[a].value,i=this[a+1].value,s=this[a+1].color,l=(i-e)/(i-o);return n.map((u,c)=>Math.round(u*l+s[c]*(1-l)))}return[0,0,0]}getColorHex(e,t={smooth:!0,withAlpha:!1}){return al(this.getColor(e,t))}getColorRelative(e,t={smooth:!0}){const a=this.getBounds();return this.getColor(a.min+e*(a.max-a.min),t)}getCanvasStrip(e={horizontal:!0,size:512,smooth:!0}){const t=document.createElement("canvas");t.width=e.horizontal?e.size:1,t.height=e.horizontal?1:e.size;const a=t.getContext("2d");if(!a)throw new Error("Canvs context is missing");const n=a.getImageData(0,0,t.width,t.height),o=n.data,i=e.size,s=this[0].value,l=(this.at(-1).value-s)/i;for(let u=0;u<i;u+=1){const c=this.getColor(s+u*l,{smooth:e.smooth});o[u*4]=c[0],o[u*4+1]=c[1],o[u*4+2]=c[2],o[u*4+3]=c.length>3?c[3]:255}return a.putImageData(n,0,0),t}resample(e,t=15){const a=this.getBounds(),n=this.scale(0,1),o=1/(t-1);let i;if(e==="ease-in-square")i=Array.from({length:t},(s,l)=>{const u=l*o,c=u**2,p=n.getColor(c);return{value:u,color:p}});else if(e==="ease-out-square")i=Array.from({length:t},(s,l)=>{const u=l*o,c=1-(1-u)**2,p=n.getColor(c);return{value:u,color:p}});else if(e==="ease-out-sqrt")i=Array.from({length:t},(s,l)=>{const u=l*o,c=u**.5,p=n.getColor(c);return{value:u,color:p}});else if(e==="ease-in-sqrt")i=Array.from({length:t},(s,l)=>{const u=l*o,c=1-(1-u)**.5,p=n.getColor(c);return{value:u,color:p}});else if(e==="ease-out-exp")i=Array.from({length:t},(s,l)=>{const u=l*o,c=1-2**(-10*u),p=n.getColor(c);return{value:u,color:p}});else if(e==="ease-in-exp")i=Array.from({length:t},(s,l)=>{const u=l*o,c=2**(10*u-10),p=n.getColor(c);return{value:u,color:p}});else throw new Error("Invalid ressampling method.");return new S({stops:i}).scale(a.min,a.max)}transparentStart(){const e=this.getRawColorStops();e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001;for(const t of e)t.color.length===3&&t.color.push(255);return e[0].color[3]=0,new S({stops:e})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}const In={NULL:new S({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new S({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new S({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new S({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new S({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new S({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new S({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new S({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new S({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new S({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new S({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new S({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new S({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new S({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new S({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new S({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new S({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new S({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new S({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new S({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new S({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new S({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new S({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new S({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new S({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new S({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new S({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new S({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new S({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new S({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new S({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new S({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new S({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new S({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new S({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new S({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new S({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new S({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new S({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new S({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new S({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new S({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new S({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new S({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new S({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new S({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new S({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new S({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new S({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})};async function nl(r,e,t={}){var a,n;if(!e.sourceId&&!e.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let o=e.data;if(typeof o=="string"){if(kt(o))o=`https://api.maptiler.com/data/${e.data}/features.json?key=${D.apiKey}`;else if(((a=o.split(".").pop())==null?void 0:a.toLowerCase().trim())==="gpx"){const i=await(await fetch(o,t)).text();o=bn(i)}else if(((n=o.split(".").pop())==null?void 0:n.toLowerCase().trim())==="kml"){const i=await(await fetch(o,t)).text();o=xn(i)}else{const i=co(o)??el(o);i&&(o=i)}if(!o)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return ol(r,{...e,data:o})}function ol(r,e){if(e.layerId&&r.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const t=e.sourceId??rt(),a=e.layerId??at(),n={polylineLayerId:a,polylineOutlineLayerId:"",polylineSourceId:t};e.data&&!r.getSource(t)&&r.addSource(t,{type:"geojson",data:e.data});const o=e.lineWidth??3,i=e.lineColor??jt(),s=e.lineOpacity??1,l=e.lineBlur??0,u=e.lineGapWidth??0;let c=e.lineDashArray??null;const p=e.outlineWidth??1,h=e.outlineColor??"#FFFFFF",d=e.outlineOpacity??1,m=e.outlineBlur??0;if(typeof c=="string"&&(c=Or(c)),e.outline===!0){const f=`${a}_outline`;n.polylineOutlineLayerId=f,r.addLayer({id:f,type:"line",source:t,layout:{"line-join":e.lineJoin??"round","line-cap":e.lineCap??"round"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof d=="number"?d:z(d),"line-color":typeof h=="string"?h:ye(h),"line-width":_n(o,p),"line-blur":typeof m=="number"?m:z(m)}},e.beforeId)}return r.addLayer({id:a,type:"line",source:t,layout:{"line-join":e.lineJoin??"round","line-cap":e.lineCap??"round"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof s=="number"?s:z(s),"line-color":typeof i=="string"?i:ye(i),"line-width":typeof o=="number"?o:z(o),"line-blur":typeof l=="number"?l:z(l),"line-gap-width":typeof u=="number"?u:z(u),...c&&{"line-dasharray":c}}},e.beforeId),n}function il(r,e){if(e.layerId&&r.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const t=e.sourceId??rt(),a=e.layerId??at(),n={polygonLayerId:a,polygonOutlineLayerId:e.outline?`${a}_outline`:"",polygonSourceId:t};if(e.data&&!r.getSource(t)){let f=e.data;typeof f=="string"&&kt(f)&&(f=`https://api.maptiler.com/data/${f}/features.json?key=${D.apiKey}`),r.addSource(t,{type:"geojson",data:f})}let o=e.outlineDashArray??null;const i=e.outlineWidth??1,s=e.outlineColor??"#FFFFFF",l=e.outlineOpacity??1,u=e.outlineBlur??0,c=e.fillColor??jt(),p=e.fillOpacity??1,h=e.outlinePosition??"center",d=e.pattern??null;typeof o=="string"&&(o=Or(o));const m=(f=null)=>{if(r.addLayer({id:a,type:"fill",source:t,minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"fill-color":typeof c=="string"?c:ye(c),"fill-opacity":typeof p=="number"?p:z(p),...f&&{"fill-pattern":f}}},e.beforeId),e.outline===!0){let v;h==="inside"?typeof i=="number"?v=.5*i:v=z(i.map(({zoom:b,value:x})=>({zoom:b,value:.5*x}))):h==="outside"?typeof i=="number"?v=-.5*i:v=z(i.map(b=>({zoom:b.zoom,value:-.5*b.value}))):v=0,r.addLayer({id:n.polygonOutlineLayerId,type:"line",source:t,layout:{"line-join":e.outlineJoin??"round","line-cap":e.outlineCap??"butt"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof l=="number"?l:z(l),"line-color":typeof s=="string"?s:ye(s),"line-width":typeof i=="number"?i:z(i),"line-blur":typeof u=="number"?u:z(u),"line-offset":v,...o&&{"line-dasharray":o}}},e.beforeId)}};return d?r.hasImage(d)?m(d):r.loadImage(d).then(f=>{r.addImage(d,f.data),m(d)}).catch(f=>{console.error("Could not load the pattern image.",f.message),m()}):m(),n}function sl(r,e){if(e.layerId&&r.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const t=e.minPointRadius??10,a=e.maxPointRadius??50,n=e.cluster??!1,o=20,i=Array.isArray(e.pointColor)?e.pointColor:In.TURBO.scale(10,e.cluster?1e4:1e3).resample("ease-out-square"),s=i.getBounds(),l=e.sourceId??rt(),u=e.layerId??at(),c=e.showLabel??n,p=e.alignOnViewport??!0,h=e.outline??!1,d=e.outlineOpacity??1,m=e.outlineWidth??1,f=e.outlineColor??"#FFFFFF";let v;const b=e.zoomCompensation??!0,x=e.minzoom??0,T=e.maxzoom??23;typeof e.pointOpacity=="number"?v=e.pointOpacity:Array.isArray(e.pointOpacity)?v=z(e.pointOpacity):e.cluster?v=fr(i,"point_count"):e.property?v=fr(i,e.property):v=z([{zoom:x,value:0},{zoom:x+.25,value:1},{zoom:T-.25,value:1},{zoom:T,value:0}]);const $={pointLayerId:u,clusterLayerId:"",labelLayerId:"",pointSourceId:l};if(e.data&&!r.getSource(l)){let P=e.data;typeof P=="string"&&kt(P)&&(P=`https://api.maptiler.com/data/${P}/features.json?key=${D.apiKey}`),r.addSource(l,{type:"geojson",data:P,cluster:n})}if(n){$.clusterLayerId=`${u}_cluster`;const P=Array.from({length:o},(ae,ve)=>{const qe=s.min+ve*(s.max-s.min)/(o-1);return{value:qe,pointRadius:t+(a-t)*(ve/(o-1))**.5,color:i.getColorHex(qe)}});r.addLayer({id:$.clusterLayerId,type:"circle",source:l,filter:["has","point_count"],paint:{"circle-color":typeof e.pointColor=="string"?e.pointColor:pr(P,"point_count"),"circle-radius":typeof e.pointRadius=="number"?e.pointRadius:Array.isArray(e.pointRadius)?z(e.pointRadius):dr(P,"point_count",!1),"circle-pitch-alignment":p?"viewport":"map","circle-pitch-scale":"map","circle-opacity":v,...h&&{"circle-stroke-opacity":typeof d=="number"?d:z(d),"circle-stroke-width":typeof m=="number"?m:z(m),"circle-stroke-color":typeof f=="string"?f:ye(f)}},minzoom:x,maxzoom:T},e.beforeId),r.addLayer({id:$.pointLayerId,type:"circle",source:l,filter:["!",["has","point_count"]],paint:{"circle-pitch-alignment":p?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof e.pointColor=="string"?e.pointColor:i.getColorHex(i.getBounds().min),"circle-radius":typeof e.pointRadius=="number"?e.pointRadius:Array.isArray(e.pointRadius)?z(e.pointRadius):P[0].pointRadius*.75,"circle-opacity":v,...h&&{"circle-stroke-opacity":typeof d=="number"?d:z(d),"circle-stroke-width":typeof m=="number"?m:z(m),"circle-stroke-color":typeof f=="string"?f:ye(f)}},minzoom:x,maxzoom:T},e.beforeId)}else{let P=typeof e.pointColor=="string"?e.pointColor:Array.isArray(e.pointColor)?e.pointColor.getColorHex(e.pointColor.getBounds().min):jt(),ae=typeof e.pointRadius=="number"?b?z([{zoom:0,value:e.pointRadius*.025},{zoom:2,value:e.pointRadius*.05},{zoom:4,value:e.pointRadius*.1},{zoom:8,value:e.pointRadius*.25},{zoom:16,value:e.pointRadius*1}]):e.pointRadius:Array.isArray(e.pointRadius)?z(e.pointRadius):b?z([{zoom:0,value:t*.05},{zoom:2,value:t*.1},{zoom:4,value:t*.2},{zoom:8,value:t*.5},{zoom:16,value:t*1}]):t;if(e.property&&Array.isArray(e.pointColor)){const ve=Array.from({length:o},(qe,nt)=>{const ot=s.min+nt*(s.max-s.min)/(o-1);return{value:ot,pointRadius:typeof e.pointRadius=="number"?e.pointRadius:t+(a-t)*(nt/(o-1))**.5,color:typeof e.pointColor=="string"?e.pointColor:i.getColorHex(ot)}});P=pr(ve,e.property),ae=dr(ve,e.property,b)}r.addLayer({id:$.pointLayerId,type:"circle",source:l,layout:{"circle-sort-key":e.property?["/",1,["get",e.property]]:0},paint:{"circle-pitch-alignment":p?"viewport":"map","circle-pitch-scale":"map","circle-color":P,"circle-opacity":v,"circle-radius":ae,...h&&{"circle-stroke-opacity":typeof d=="number"?d:z(d),"circle-stroke-width":typeof m=="number"?m:z(m),"circle-stroke-color":typeof f=="string"?f:ye(f)}},minzoom:x,maxzoom:T},e.beforeId)}if(c!==!1&&(e.cluster||e.property)){$.labelLayerId=`${u}_label`;const P=e.labelColor??"#fff",ae=e.labelSize??12;r.addLayer({id:$.labelLayerId,type:"symbol",source:l,filter:["has",e.cluster?"point_count":e.property],layout:{"text-field":e.cluster?"{point_count_abbreviated}":`{${e.property}}`,"text-font":["Noto Sans Regular"],"text-size":ae,"text-pitch-alignment":p?"viewport":"map","symbol-sort-key":["/",1,["get",e.cluster?"point_count":e.property]]},paint:{"text-color":P,"text-opacity":v},minzoom:x,maxzoom:T},e.beforeId)}return $}function ll(r,e){if(e.layerId&&r.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const t=e.sourceId??rt(),a=e.layerId??at(),n=e.minzoom??0,o=e.maxzoom??23,i=e.zoomCompensation??!0,s=e.opacity??[{zoom:n,value:0},{zoom:n+.25,value:1},{zoom:o-.25,value:1},{zoom:o,value:0}];let l=Array.isArray(e.colorRamp)?e.colorRamp:In.TURBO.transparentStart();const u=l.getBounds();(u.min!==0||u.max!==1)&&(l=l.scale(0,1)),l.hasTransparentStart()||(l=l.transparentStart());const c=e.intensity??[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],p=e.property??null,h=e.weight??1;let d=1;p?typeof h=="number"?(d=h,typeof e.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(h)?d=Cn(h,p):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof h=="number"?d=h:Array.isArray(h)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const m=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],f=e.radius??(i?m:10);let v=1;typeof f=="number"?v=f:Array.isArray(f)&&"zoom"in f[0]?v=z(f):p&&Array.isArray(f)&&"propertyValue"in f[0]?v=Tn(f,p,i):!p&&Array.isArray(f)&&"propertyValue"in f[0]?(v=z(m),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):v=z(m);const b={heatmapLayerId:a,heatmapSourceId:t};if(e.data&&!r.getSource(t)){let x=e.data;typeof x=="string"&&kt(x)&&(x=`https://api.maptiler.com/data/${x}/features.json?key=${D.apiKey}`),r.addSource(t,{type:"geojson",data:x})}return r.addLayer({id:a,type:"heatmap",source:t,minzoom:n,maxzoom:o,paint:{"heatmap-weight":d,"heatmap-intensity":typeof c=="number"?c:z(c),"heatmap-color":Mn(l),"heatmap-radius":v,"heatmap-opacity":typeof s=="number"?s:z(s)}},e.beforeId),b}const Be=Object.freeze(Object.defineProperty({__proto__:null,addHeatmap:ll,addPoint:sl,addPolygon:il,addPolyline:nl,colorDrivenByProperty:pr,colorPalettes:ur,computeRampedOutlineWidth:_n,dashArrayMaker:Or,generateRandomLayerName:at,generateRandomSourceName:rt,getRandomColor:jt,heatmapIntensityFromColorRamp:Mn,lerpZoomNumberValues:cr,opacityDrivenByProperty:fr,paintColorOptionsToPaintSpec:ye,radiusDrivenByProperty:dr,radiusDrivenByPropertyHeatmap:Tn,rampedOptionsToLayerPaintSpec:z,rampedPropertyValueWeight:Cn,takeScreenshot:tl},Symbol.toStringTag,{value:"Module"}));lo();w.Map;w.Marker;w.Popup;w.Style;w.CanvasSource;w.GeoJSONSource;w.ImageSource;w.RasterTileSource;w.RasterDEMTileSource;w.VectorTileSource;w.VideoSource;w.NavigationControl;w.GeolocateControl;w.AttributionControl;w.LogoControl;w.ScaleControl;w.FullscreenControl;w.TerrainControl;w.BoxZoomHandler;w.ScrollZoomHandler;w.CooperativeGesturesHandler;w.KeyboardHandler;w.TwoFingersTouchPitchHandler;w.MapWheelEvent;w.MapTouchEvent;w.MapMouseEvent;w.config;w.getVersion;const{setRTLTextPlugin:Pl,getRTLTextPluginStatus:Nl,LngLat:$l,LngLatBounds:Ul,MercatorCoordinate:Dl,Evented:jl,AJAXError:Ol,prewarm:Fl,clearPrewarmedResources:ql,Hash:Bl,Point:Hl,EdgeInsets:Vl,DragRotateHandler:Gl,DragPanHandler:Kl,TwoFingersTouchZoomRotateHandler:Wl,DoubleClickZoomHandler:Zl,TwoFingersTouchZoomHandler:Jl,TwoFingersTouchRotateHandler:Yl,getWorkerCount:Xl,setWorkerCount:Ql,getMaxParallelImageRequests:eu,setMaxParallelImageRequests:tu,getWorkerUrl:ru,setWorkerUrl:au,addSourceType:nu,importScriptInWorkers:ou,addProtocol:iu,removeProtocol:su}=w,ul="@maptiler/leaflet-maptilersdk",cl="4.0.3",lu=O.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},map:null,initialize:function(r){O.setOptions(this,r),this._throttledUpdate=O.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(r){var e;this._container||this._initContainer();const t=this.getPaneName();(e=r.getPane(t))==null||e.appendChild(this._container),this._initMaptilerSDK(),this._offset=this._map.containerPointToLayerPoint([0,0]),r.options.zoomAnimation&&O.DomEvent.on(r._proxy,O.DomUtil.TRANSITION_END,this._transitionEnd,this),r.attributionControl.addAttribution('<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>')},onRemove:function(r){var e;this._map._proxy&&this._map.options.zoomAnimation&&O.DomEvent.off(this._map._proxy,O.DomUtil.TRANSITION_END,this._transitionEnd,this);const t=this.getPaneName();(e=r.getPane(t))==null||e.removeChild(this._container),this._maptilerMap.remove(),this._maptilerMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaptilerSDKMap:function(){return this._maptilerMap},getCanvas:function(){return this._maptilerMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){const r=this.getSize().multiplyBy(.5),e=this._map.latLngToContainerPoint(this._map.getCenter());return O.latLngBounds(this._map.containerPointToLatLng(e.subtract(r)),this._map.containerPointToLatLng(e.add(r)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},setStyle:function(r){this._maptilerMap.setStyle(r)},setLanguage:function(r){this._maptilerMap.setLanguage(r)},_roundPoint:r=>({x:Math.round(r.x),y:Math.round(r.y)}),_initContainer:function(){this._container=O.DomUtil.create("div","leaflet-gl-layer");const r=this.getSize(),e=this._map.getSize().multiplyBy(this.options.padding);this._container.style.width=`${r.x}px`,this._container.style.height=`${r.y}px`;const t=this._map.containerPointToLayerPoint([0,0]).subtract(e);O.DomUtil.setPosition(this._container,this._roundPoint(t))},_initMaptilerSDK:function(){const r=this._map.getCenter(),e={...this.options,projection:"mercator",container:this._container,center:[r.lng,r.lat],zoom:this._map.getZoom()-1,attributionControl:!1};this.options.geolocate&&(e.center=void 0,e.zoom=void 0),this._maptilerMap=new Dt(e),this._maptilerMap.telemetry.registerModule(ul,cl),this._maptilerMap.once("load",()=>{this.fire("ready")}),this._maptilerMap.once("load",async()=>{let a={logo:null};try{const n=Object.keys(this._maptilerMap.style.sourceCaches).map(i=>this._maptilerMap.getSource(i)).filter(i=>i&&"url"in i&&typeof i.url=="string"&&(i==null?void 0:i.url.includes("tiles.json"))),o=new URL(n[0].url);o.searchParams.has("key")||o.searchParams.append("key",e.apiKey),a=await(await fetch(o.href)).json()}catch{}if(a.logo||e.maptilerLogo){const n=a.logo??"https://api.maptiler.com/resources/logo.svg",o=document.createElement("a");o.href="https://www.maptiler.com",o.style.setProperty("position","absolute"),o.style.setProperty("left","10px"),o.style.setProperty("bottom","2px"),o.style.setProperty("z-index","999");const i=document.createElement("img");i.src=n,i.alt="MapTiler logo",i.width=100,i.height=30,o.appendChild(i),this._map.getContainer().appendChild(o)}}),this._maptilerMap.transform.freezeElevation=!0,this.options.geolocate&&this._maptilerMap.on("load",()=>{this._map.setView(this._maptilerMap.getCenter(),this._maptilerMap.getZoom()+1)}),this._transformGL(),this._maptilerMap._actualCanvas=this._maptilerMap._canvas;const t=this._maptilerMap._actualCanvas;O.DomUtil.addClass(t,"leaflet-image-layer"),O.DomUtil.addClass(t,"leaflet-zoom-animated"),this.options.interactive&&O.DomUtil.addClass(t,"leaflet-interactive"),this.options.className&&O.DomUtil.addClass(t,this.options.className),this.addHeatmap=a=>Be.addHeatmap(this._maptilerMap,a),this.addPolygon=a=>Be.addPolygon(this._maptilerMap,a),this.addPoint=a=>Be.addPoint(this._maptilerMap,a),this.addPolyline=a=>Be.addPolyline(this._maptilerMap,a),this.takeScreenshot=a=>Be.takeScreenshot(this._maptilerMap,a)},_update:function(){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const r=this.getSize(),e=this._map.getSize().multiplyBy(this.options.padding),t=this._map.containerPointToLayerPoint([0,0]).subtract(e);O.DomUtil.setPosition(this._container,this._roundPoint(t)),this._transformGL(),this._maptilerMap.transform.width!==r.x||this._maptilerMap.transform.height!==r.y?(this._container.style.width=`${r.x}px`,this._container.style.height=`${r.y}px`,this._maptilerMap._resize!==null&&this._maptilerMap._resize!==void 0?this._maptilerMap._resize():this._maptilerMap.resize()):this._maptilerMap._update!==null&&this._maptilerMap._update!==void 0?this._maptilerMap._update():this._maptilerMap.update()},_transformGL:function(){this._maptilerMap.setCenter(this._map.getCenter()),this._maptilerMap.setZoom(this._map.getZoom()-1)},_pinchZoom:function(){this._maptilerMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(r){const e=this._map.getZoomScale(r.zoom),t=this._map.getSize().multiplyBy(this.options.padding*e),a=this.getSize()._divideBy(2),n=this._map.project(r.center,r.zoom)._subtract(a)._add(this._map._getMapPanePos().add(t))._round(),o=this._map.project(this._map.getBounds().getNorthWest(),r.zoom)._subtract(n);O.DomUtil.setTransform(this._maptilerMap.getCanvas(),o.subtract(this._offset),e)},_zoomStart:function(){this._zooming=!0},_zoomEnd:function(){const r=this._map.getZoomScale(this._map.getZoom());O.DomUtil.setTransform(this._maptilerMap.getCanvas(),new O.Point(0,0),r),this._zooming=!1,this._update()},_transitionEnd:function(){O.Util.requestAnimFrame(()=>{const r=this._map.getZoom(),e=this._map.getCenter(),t=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());O.DomUtil.setTransform(this._maptilerMap._actualCanvas,t,1),this._maptilerMap.once("moveend",O.Util.bind(()=>{this._zoomEnd()},this)),this._maptilerMap.jumpTo({center:e,zoom:r-1})},this)},_resize:function(r){this._transitionEnd(r)}});export{lu as c};
